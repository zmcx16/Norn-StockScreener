(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"3RSX":function(e,t,a){"use strict";var r=a("Qfp6");e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6)&&!new RegExp("[^"+r.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}},"4cdY":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("hszt"),n=a("wcMh"),o=a("J+eN"),l=a("b+jq"),i=a("Ao2N"),c=Object(r.a)({chartName:"LineChart",GraphicalChild:n.a,axisComponents:[{axisType:"xAxis",AxisComp:o.a},{axisType:"yAxis",AxisComp:l.a}],formatAxisMap:i.b})},"50AU":function(e,t,a){e.exports={container:"marketCorrelationMatrix-module--container--Xm37f",matrixColTitle:"marketCorrelationMatrix-module--matrixColTitle--2Xiij",matrixRowTitle:"marketCorrelationMatrix-module--matrixRowTitle--2Yamv",matrixNodeFirstRow:"marketCorrelationMatrix-module--matrixNodeFirstRow--3-Qv7",matrixNodeFirstColumn:"marketCorrelationMatrix-module--matrixNodeFirstColumn--1iHHg",matrixNode:"marketCorrelationMatrix-module--matrixNode--2o4fm"}},"5R+2":function(e,t){e.exports=function(e,t,a){for(var r=(2<<Math.log(t.length-1)/Math.LN2)-1,n=-~(1.6*r*a/t.length),o="";;)for(var l=e(n),i=n;i--;)if((o+=t[l[i]&r]||"").length===+a)return o}},Bpvx:function(e,t,a){"use strict";var r=a("Qfp6"),n=a("Pfkr"),o=a("3RSX"),l=a("n8Jw")||0;function i(){return n(l)}e.exports=i,e.exports.generate=i,e.exports.seed=function(t){return r.seed(t),e.exports},e.exports.worker=function(t){return l=t,e.exports},e.exports.characters=function(e){return void 0!==e&&r.characters(e),r.shuffled()},e.exports.isValid=o},CR0S:function(e,t,a){"use strict";var r,n="object"==typeof window&&(window.crypto||window.msCrypto);r=n&&n.getRandomValues?function(e){return n.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],a=0;a<e;a++)t.push(Math.floor(256*Math.random()));return t},e.exports=r},JSnC:function(e,t,a){"use strict";a.r(t);var r=a("q1tI"),n=a.n(r),o=a("w8ma"),l=a("Bl7J"),i=a("KQm4"),c=a("V3n9"),s=a("tAME"),u=a("hGmu"),m=a("G43+"),p=a("je4i"),d=a.n(p),f=a("tFdz"),h=a("jJ2d"),g=a("/1FI"),x=a("ps87"),b=a("4cdY"),y=a("y9N3"),w=a("J+eN"),v=a("b+jq"),E=a("nJDY"),S=a("Yjvw"),j=a("wcMh"),M=a("wd/R"),R=a.n(M);var k=e=>{let{data:t,description:a}=e;return n.a.createElement("div",{style:{width:window.innerWidth-100+"px",height:window.innerHeight-100+"px",maxWidth:"1200px",maxHeight:"600px"}},n.a.createElement(x.a,{width:"100%",height:"100%"},n.a.createElement(b.a,{data:t,margin:{top:5,right:30,left:20,bottom:5}},n.a.createElement(y.a,{strokeDasharray:"3 3"}),n.a.createElement(w.a,{dataKey:"Date",tickFormatter:e=>R()(e).format("MM/DD/YYYY")}),n.a.createElement(v.a,{domain:[-1,1]}),n.a.createElement(E.a,null),n.a.createElement(S.a,null),n.a.createElement(j.a,{type:"monotone",name:a,dataKey:"Score",stroke:"#8884d8",dot:!1}))))},C=a("50AU"),N=a.n(C);const O=(e,t)=>{let a=0,r=0,n=0,o=0,l=0;const i=e.length=t.length=Math.min(e.length,t.length);return e.forEach((e,i)=>{const c=t[i];a+=e,r+=c,n+=e*c,o+=e*e,l+=c*c}),(i*n-a*r)/Math.sqrt((i*o-a*a)*(i*l-r*r))},T=e=>e.map(e=>({symbol:e.symbol,src:e.src})),D=e=>{const t=T(e);return t.reduce((a,r)=>{const n=e.find(e=>e.symbol===r.symbol),o=t.reduce((e,a)=>{const o=n.correlations[a.symbol].value,l=n.correlations[a.symbol].p_value,c=n.dataUrl,s=t.findIndex(e=>e.symbol==r.symbol),u=t.findIndex(e=>e.symbol==a.symbol),m=o<0?(e=>{const t=Math.abs(e);return`rgba(243, 87, 86, ${isNaN(t)?0:t})`})(o):(e=>{const t=Math.abs(e);return`rgba(46, 233, 255, ${isNaN(t)?0:t})`})(o);return[].concat(Object(i.a)(e),[{colSymbolSrc:a,rowSymbolSrc:r,row:s,column:u,value:o,pValue:l,dataUrl:c,color:m}])},[]);return[].concat(Object(i.a)(a),Object(i.a)(o))},[])},F=e=>{let{data:t,popperTipRef:a,modalWindowRef:r}=e,o=N.a.matrixNode;0===t.row&&(o+=" "+N.a.matrixNodeFirstRow),0===t.column&&(o+=" "+N.a.matrixNodeFirstColumn);const l=`${t.colSymbolSrc.symbol} has a ${t.value} correlation to ${t.rowSymbolSrc.symbol}\np-value: ${t.pValue}\n`,i=Object(f.a)({cachePolicy:"no-cache"}),c=Object(f.a)({cachePolicy:"no-cache"});return n.a.createElement("div",{className:o},n.a.createElement("div",{style:{background:t.color},onMouseOver:e=>{a.current.setOpen(!0,e.currentTarget,l)},onMouseOut:()=>{a.current.setOpen(!1)},onClick:()=>{const e=async(e,t,a)=>{let r=(e+"_"+t).match(/\w+/gi).join("_")+".json";const n=await a.get("/norn-data/markets/"+r);return a.response.ok&&n.data&&n.data.length>0?n.data:null};Promise.all([e(t.colSymbolSrc.src,t.colSymbolSrc.symbol,i),e(t.rowSymbolSrc.src,t.rowSymbolSrc.symbol,c)]).then(e=>{if(2===e.length&&null!==e[0]&&null!==e[1]){const a=(e,t,a)=>Date.parse(e)-Date.parse(t)>24*a*60*60*1e3,o=e=>{let t={};const r=a(e[0].Date,e[1].Date,15);return e.forEach((e,a)=>{let n=e.Close;if("string"==typeof n&&(n=parseFloat(n.replace("%",""))),r){let a=Date.parse(e.Date);const r=(a.getMonth()+1).toString().padStart(2,"0")+"/01/"+a.getFullYear().toString();t[r]=n}else t[e.Date]=n}),t};let l=o(e[0]),i=o(e[1]);const c=((e,t)=>Object.keys(e).filter({}.hasOwnProperty.bind(t)))(l,i);let s=2,u=Date.parse(c[c.length-1])+24*g.E*60*60*1e3;for(let e=c.length-2;e>=0;e--)if(u<=Date.parse(c[e])){s=Math.max(s,c.length-1-e+1);break}let m=[];for(let e=c.length-1-s+1;e>=0;e--){let t=[],a=[];c.slice(e,e+s).forEach(e=>{t.push(l[e]),a.push(i[e])});let r=O(t,a);m.push({Date:c[e],Score:r})}const p=`${t.rowSymbolSrc.symbol} - ${t.colSymbolSrc.symbol} Rolling ${g.E} days Correlation`;r.current.popModalWindow(n.a.createElement(k,{data:m,description:p}))}else r.current.popModalWindow(n.a.createElement("div",null,"Load some market data failed"))}).catch(()=>{r.current.popModalWindow(n.a.createElement("div",null,"Can't draw rolling correlation chart for these market data"))})}},"NaN"===t.value?"NaN":t.value.toFixed(2).replace(/(\.0*|(?<=(\..*))0*)$/,"").replace("0.",".")))},A=e=>{let{popperTipRef:t}=e;t.current={setOpen:function(e,t,a){void 0===t&&(t=null),void 0===a&&(a=""),e&&(i(t),p(a)),o(e)},getOpen:()=>a};const{0:a,1:o}=Object(r.useState)(!1),{0:l,1:i}=Object(r.useState)(null),{0:c,1:p}=Object(r.useState)("");return n.a.createElement(s.a,{open:a,anchorEl:l,transition:!0},e=>{let{TransitionProps:t}=e;return n.a.createElement(u.a,Object.assign({},t,{timeout:350}),n.a.createElement(m.a,{style:{padding:"10px"}},n.a.createElement("span",{style:{whiteSpace:"pre-line",lineHeight:"20px",textAlign:"center"}},c)))})};var Y=e=>{let{loadingAnimeRef:t}=e;const a=Object(r.useRef)({popModalWindow:null,popPureModal:null}),o=Object(r.useRef)({setOpen:null,getOpen:null}),{0:l,1:i}=Object(r.useState)([]),{get:s,response:u}=Object(f.a)({cachePolicy:"no-cache"});return Object(r.useEffect)(()=>((async()=>{const e=await s("/norn-data/market-correlation-matrix.json");u.ok?(console.log(e),i(e.table)):(a.current.popModalWindow(n.a.createElement("div",null,"Load market-correlation-matrix.json failed")),i([])),t.current.setLoading(!1)})(),()=>{}),[]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:N.a.container},n.a.createElement("div",{style:{display:"grid",justifyItems:"center",alignItems:"center",gridTemplateColumns:"200px "+"40px ".repeat(T(l).length)}},n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:N.a.matrixColTitle,key:d.a.generate()}),T(l).map(e=>n.a.createElement("div",{className:N.a.matrixColTitle,key:d.a.generate()},e.symbol))),(()=>{let e=[];return D(l).forEach((t,r)=>{r%l.length==0&&e.push(n.a.createElement("div",{className:N.a.matrixRowTitle,key:d.a.generate()},n.a.createElement(c.a,{href:t.dataUrl,target:"_blank",rel:"noreferrer noopener"},n.a.createElement("span",null,t.rowSymbolSrc.symbol)))),e.push(n.a.createElement(F,{data:t,popperTipRef:o,modalWindowRef:a,key:d.a.generate()}))}),e})())),n.a.createElement(A,{popperTipRef:o}),n.a.createElement(h.a,{modalWindowRef:a}))},$=a("3Y3G"),J=a("vrFN");t.default=()=>{const e=Object(r.useRef)({getLoading:null,setLoading:null});return n.a.createElement(o.a,{injectFirst:!0},n.a.createElement(J.a,null),n.a.createElement(l.a,null,n.a.createElement(Y,{loadingAnimeRef:e})),n.a.createElement($.a,{loadingAnimeRef:e}))}},Pfkr:function(e,t,a){"use strict";var r,n,o=a("vZIR");a("Qfp6");e.exports=function(e){var t="",a=Math.floor(.001*(Date.now()-1567752802062));return a===n?r++:(r=0,n=a),t+=o(7),t+=o(e),r>0&&(t+=o(r)),t+=o(a)}},Qfp6:function(e,t,a){"use strict";var r,n,o,l=a("fqyn"),i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function c(){o=!1}function s(e){if(e){if(e!==r){if(e.length!==i.length)throw new Error("Custom alphabet for shortid must be "+i.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,a){return t!==a.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+i.length+" unique characters. These characters were not unique: "+t.join(", "));r=e,c()}}else r!==i&&(r=i,c())}function u(){return o||(o=function(){r||s(i);for(var e,t=r.split(""),a=[],n=l.nextValue();t.length>0;)n=l.nextValue(),e=Math.floor(n*t.length),a.push(t.splice(e,1)[0]);return a.join("")}())}e.exports={get:function(){return r||i},characters:function(e){return s(e),r},seed:function(e){l.seed(e),n!==e&&(c(),n=e)},lookup:function(e){return u()[e]},shuffled:u}},fqyn:function(e,t,a){"use strict";var r=1;e.exports={nextValue:function(){return(r=(9301*r+49297)%233280)/233280},seed:function(e){r=e}}},je4i:function(e,t,a){"use strict";e.exports=a("Bpvx")},n8Jw:function(e,t,a){"use strict";e.exports=0},vZIR:function(e,t,a){"use strict";var r=a("Qfp6"),n=a("CR0S"),o=a("5R+2");e.exports=function(e){for(var t,a=0,l="";!t;)l+=o(n,r.get(),1),t=e<Math.pow(16,a+1),a++;return l}}}]);
//# sourceMappingURL=component---src-pages-market-correlation-matrix-js-e0536556941d231f3a67.js.map