(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"+kWf":function(e,t,i){"use strict";i.r(t);var a=i("q1tI"),l=i.n(a),r=i("w8ma"),n=i("Bl7J"),o=i("KQm4"),s=i("Nb3f"),c=i.n(s),d=i("OGDC"),m=i("DbNq"),u=i.n(m),y=i("cD7S"),h=i.n(y),p=i("MGIy"),_=i("5I82"),b=i("NZDO"),E=i("z6Y5"),M=i("ZuIi"),v=i("V3n9"),A=i("kQF4"),x=i("Fg+5"),g=i("Gqia"),C=i("rT0G"),V=i("UG0H"),k=i("sD0r"),f=i("GleO"),S=i("je4i"),D=i.n(S),P=i("tFdz"),O=i("wd/R"),j=i.n(O),N=i("b6Qr"),w=i("jJ2d"),K=i("qnxO"),W=i("/1FI"),L=i("kLkQ"),U=i("Nihg"),B=i("WSAr");const I=[{name:"output_bias_0.1_1.0_NaN",display_name:"Valuation Bias: last price > 0.1; premium > 100%"},{name:"output_bias_0.5_NaN_-0.5",display_name:"Valuation Bias: last price > 0.1; discount > 50%"},{name:"self_query",display_name:"Self Query"}],H={parameters:[{name:"symbol",display_name:"Symbol",val:"DAC",gridsm:1},{name:"min_next_days",display_name:"Min Next Days",val:"0",gridsm:1},{name:"max_next_days",display_name:"Max Next Days",val:"45",gridsm:1},{name:"min_volume",display_name:"Min Volume",val:"10",gridsm:1},{name:"last_trade_days",display_name:"Last Trade Days",val:"3",gridsm:1},{name:"ewma_his_vol_period",display_name:"EWMA History Volatility Period",val:"21",gridsm:2},{name:"ewma_his_vol_lambda",display_name:"EWMA History Volatility Lambda",val:"0.94",gridsm:2},{name:"proxy",display_name:"Proxy",val:"",gridsm:1}]};var R=i("Ogif"),T=i("y4pv"),X=i.n(T),F=i("ej0n"),q=i.n(F);const Y=e=>{let{queryParameterRef:t,queryParameterCurrentRef:i}=e;return H.parameters.map((e,a)=>((e,t,i,a,r)=>l.a.createElement(E.a,{item:!0,md:r,xs:12,key:D.a.generate()},l.a.createElement("form",{noValidate:!0,autoComplete:"off"},l.a.createElement(p.a,{id:t,className:q.a.valueText,label:a,variant:"outlined",defaultValue:i,size:"small",inputRef:e}))))(t.current[a],e.name,null===i.current?e.val:i.current[a],e.display_name,e.gridsm))},z=e=>{let{FetchNornFinanceAPIServerRef:t}=e;const i=Object(P.a)("https://"+W.q,{cachePolicy:"no-cache"});return t.current.server=i,l.a.createElement(l.a.Fragment,null)};var G=e=>{let{loadingAnimeRef:t}=e;const{0:i,1:r}=Object(a.useState)([]),{0:n,1:s}=Object(a.useState)([]),{0:m,1:y}=Object(a.useState)({}),{0:p,1:S}=Object(a.useState)(0),{0:O,1:T}=Object(a.useState)(!1),{0:F,1:G}=Object(a.useState)(null),Q=Object(a.useRef)({popModalWindow:null,popPureModal:null}),J=Object(a.useRef)({server:null}),Z={Symbol:{hide:!1,text:"Symbol"},StockPrice:{hide:!1,text:"Price (Stock)"},StockShortFloat:{hide:!1,text:"Short Float (Stock)"},ExpiryDate:{hide:!1,text:"Expiry"},Strike:{hide:!1,text:"Strike"},LastPrice:{hide:!1,text:"Last Price"},AvgEWMA:{hide:!1,text:"Valuation (Avg)"},PriceBias:{hide:!1,text:"Bias (Price)",description:"| Last Price - Valuation (Avg) | / Last Price"},VolBias:{hide:!1,text:"Bias (Vol.)"},PriceStrikeRatio:{hide:!1,text:"P/S (%)",description:"Last Price / Strike"},PriceStrikeYearRatio:{hide:!1,text:"P/S (Y%)",description:"Last Price / Strike (Year)"},DistanceRatio:{hide:!1,text:"Dist (%)",description:"| Price (Stock) - Strike | / Strike"},KellyCriterion_buy:{hide:!0,text:"Kelly (Buy)",description:"Kelly Criterion"},KellyCriterion_sell:{hide:!0,text:"Kelly (Sell)",description:"Kelly Criterion"},KellyCriterion_MU_0_buy:{hide:!1,text:"Kelly (Buy, MU0)",description:"Kelly Criterion, MU=0"},KellyCriterion_MU_0_sell:{hide:!1,text:"Kelly (Sell, MU0)",description:"Kelly Criterion, MU=0"},KellyCriterion_IV_buy:{hide:!I[p].name.startsWith("self_query"),text:"Kelly (Buy, IV)",description:"Kelly Criterion (IV)"},KellyCriterion_IV_sell:{hide:!I[p].name.startsWith("self_query"),text:"Kelly (Sell, IV)",description:"Kelly Criterion (IV)"},EarningDate:{hide:!1,text:"Earning Date"},ExDividendDate:{hide:!1,text:"Ex-Dividend Date"},ExerciseProbability:{hide:!1,text:"Exercise Probability"},Delta:{hide:!1,text:"δ (Delta)"},Gamma:{hide:!1,text:"γ (Gamma)"},Rho:{hide:!1,text:"ρ (Rho)"},Theta:{hide:!1,text:"θ (Theta)"},Vega:{hide:!1,text:"ν (Vega)"},LastTradeDate:{hide:!1,text:"Last Trade Date"},Bid:{hide:!1,text:"Bid"},Ask:{hide:!1,text:"Ask"},Change:{hide:!0,text:"Change"},PercentChange:{hide:!1,text:"Change (%)"},Volume:{hide:!1,text:"Volume"},OpenInterest:{hide:!1,text:"Open Interest"},ImpliedVolatility:{hide:!1,text:"Implied Volatility"},EWMAHisVol:{hide:!1,text:"EWMA Historical Volatility"},BSM_EWMAHisVol:{hide:!1,text:"Black Scholes Merton"},MC_EWMAHisVol:{hide:!1,text:"Monte Carlo"},BT_EWMAHisVol:{hide:!1,text:"Binomial Tree"},MCChart:{hide:!1,text:"MC Chart"}},$=(e,t,i,a,r,n)=>({field:e,headerName:t,width:i,type:"number",renderCell:e=>{const t=e.row.symbol;let i="javascript:void(0)";if("stock"===n)i=U.d+"quote/"+t+"?p="+t;else if("option"===n){const a=e.row.expiryDate.replaceAll("-","").substring(2),l=1===e.row.kind?"C":"P",r=parseInt(e.row.strike,10).toString().padStart(5,0);let n=e.row.strike.toFixed(3);n=n.substring(n.length-3);const o=t+a+l+r+n;i=U.d+"quote/"+o+"?p="+o}return"-"===e.value||e.value===-Number.MAX_VALUE||e.value===Number.MAX_VALUE||null===e.value||void 0===e.value||"Infinity"===e.value||"NaN"===e.value?l.a.createElement("span",null,"-"):l.a.createElement(v.a,{href:i,target:"_blank",rel:"noreferrer noopener"},l.a.createElement("span",null,e.value.toFixed(a)))},hide:r}),ee=()=>[Object(B.j)("Symbol",115,"symbol"in m&&m.symbol),$("stockPrice",Z.StockPrice.text,125,2,"stockPrice"in m?m.stockPrice:Z.StockPrice.hide,"stock"),Object(B.i)("stockShortFloat",Z.StockShortFloat.text,115,"stockShortFloat"in m?m.stockShortFloat:Z.StockShortFloat.hide),{field:"expiryDate",headerName:Z.ExpiryDate.text,width:120,type:"date",renderCell:e=>l.a.createElement("span",null,j()(e.row.expiryDate).format("YYYY-MM-DD")),hide:"expiryDate"in m?m.expiryDate:Z.ExpiryDate.hide},Object(B.h)("strike",Z.Strike.text,110,2,"strike"in m?m.strike:Z.Strike.hide),$("lastPrice",Z.LastPrice.text,140,2,"lastPrice"in m?m.lastPrice:Z.LastPrice.hide,"option"),Object(B.h)("avgEWMA",Z.AvgEWMA.text,140,2,"avgEWMA"in m?m.avgEWMA:Z.AvgEWMA.hide),{field:"priceBias",headerName:Z.PriceBias.text,width:120,type:"number",description:Z.PriceBias.description,renderCell:e=>"-"===e.value||e.value===-Number.MAX_VALUE||e.value===Number.MAX_VALUE||null===e.value||void 0===e.value||"Infinity"===e.value||"NaN"===e.value?l.a.createElement("span",null,"-"):l.a.createElement("span",{style:{fontWeight:500,color:e.row.lastPrice>e.row.avgEWMA?Object(L.f)(e.value):e.row.lastPrice<e.row.avgEWMA?Object(L.d)(e.value):""}},e.value.toFixed(2)),hide:"priceBias"in m?m.priceBias:Z.PriceBias.hide},Object(B.f)("priceStrikeRatio",Z.PriceStrikeRatio.text,90,"priceStrikeRatio"in m?m.priceStrikeRatio:Z.PriceStrikeRatio.hide,Z.PriceStrikeRatio.description),Object(B.f)("priceStrikeYearRatio",Z.PriceStrikeYearRatio.text,90,"priceStrikeYearRatio"in m?m.priceStrikeRatio:Z.PriceStrikeYearRatio.hide,Z.PriceStrikeYearRatio.description),Object(B.f)("distanceRatio",Z.DistanceRatio.text,90,"distanceRatio"in m?m.distanceRatio:Z.DistanceRatio.hide,Z.DistanceRatio.description),Object(B.b)("KellyCriterion_buy",Z.KellyCriterion_buy.text,130,2,"KellyCriterion_buy"in m?m.KellyCriterion_buy:Z.KellyCriterion_buy.hide,500,Z.KellyCriterion_buy.description),Object(B.b)("KellyCriterion_sell",Z.KellyCriterion_sell.text,130,2,"KellyCriterion_sell"in m?m.KellyCriterion_sell:Z.KellyCriterion_sell.hide,500,Z.KellyCriterion_sell.description),Object(B.b)("KellyCriterion_MU_0_buy",Z.KellyCriterion_MU_0_buy.text,130,2,"KellyCriterion_MU_0_buy"in m?m.kellyCriterion_MU_0_buy:Z.KellyCriterion_MU_0_buy.hide,500,Z.KellyCriterion_MU_0_buy.description),Object(B.b)("KellyCriterion_MU_0_sell",Z.KellyCriterion_MU_0_sell.text,130,2,"KellyCriterion_MU_0_sell"in m?m.KellyCriterion_MU_0_sell:Z.KellyCriterion_MU_0_sell.hide,500,Z.KellyCriterion_MU_0_sell.description),Object(B.b)("KellyCriterion_IV_buy",Z.KellyCriterion_IV_buy.text,130,2,"KellyCriterion_IV_buy"in m?m.kellyCriterion_IV_buy:Z.KellyCriterion_IV_buy.hide,500,Z.KellyCriterion_IV_buy.description),Object(B.b)("KellyCriterion_IV_sell",Z.KellyCriterion_IV_sell.text,130,2,"KellyCriterion_IV_sell"in m?m.KellyCriterion_IV_sell:Z.KellyCriterion_IV_sell.hide,500,Z.KellyCriterion_IV_sell.description),{field:"earningDate",headerName:Z.EarningDate.text,width:120,renderCell:e=>l.a.createElement("span",{style:{whiteSpace:"normal",wordWrap:"break-word",color:e.row.earningDateColor}},e.value),hide:"earningDate"in m?m.earningDate:Z.EarningDate.hide},{field:"exDividendDate",headerName:Z.ExDividendDate.text,width:120,renderCell:e=>"exDividendLink"in e.row&&""!=e.row.exDividendLink&&"-"!=e.row.exDividendLink?l.a.createElement(v.a,{href:e.row.exDividendLink,target:"_blank",rel:"noreferrer noopener"},l.a.createElement("span",{style:{color:e.row.exDividendDateColor}},e.value)):l.a.createElement("span",null,e.value),hide:"exDividendDate"in m?m.exDividendDate:Z.ExDividendDate.hide},Object(B.f)("exerciseProbability",Z.ExerciseProbability.text,90,"exerciseProbability"in m?m.exerciseProbability:Z.ExerciseProbability.hide),Object(B.h)("delta",Z.Delta.text,90,2,"delta"in m?m.delta:Z.Delta.hide),Object(B.h)("gamma",Z.Gamma.text,90,2,"gamma"in m?m.gamma:Z.Gamma.hide),Object(B.h)("rho",Z.Rho.text,90,2,"rho"in m?m.rho:Z.Rho.hide),Object(B.h)("theta",Z.Theta.text,90,2,"theta"in m?m.theta:Z.Theta.hide),Object(B.h)("vega",Z.Vega.text,90,2,"vega"in m?m.vega:Z.Vega.hide),{field:"lastTradeDate",headerName:Z.LastTradeDate.text,width:145,type:"date",renderCell:e=>l.a.createElement("span",null,j()(e.row.lastTradeDate).format("YYYY-MM-DD")),hide:"lastTradeDate"in m?m.lastTradeDate:Z.LastTradeDate.hide},Object(B.h)("bid",Z.Bid.text,105,2,"bid"in m?m.bid:Z.Bid.hide),Object(B.h)("ask",Z.Ask.text,105,2,"ask"in m?m.ask:Z.Ask.hide),Object(B.c)("change",Z.Change.text,130,"change"in m?m.change:Z.Change.hide,500),Object(B.b)("percentChange",Z.PercentChange.text,140,2,"percentChange"in m?m.percentChange:Z.PercentChange.hide,500),Object(B.h)("volume",Z.Volume.text,140,0,"volume"in m?m.volume:Z.Volume.hide),Object(B.h)("openInterest",Z.OpenInterest.text,140,0,"openInterest"in m?m.openInterest:Z.OpenInterest.hide),Object(B.f)("impliedVolatility",Z.ImpliedVolatility.text,140,"impliedVolatility"in m?m.impliedVolatility:Z.ImpliedVolatility.hide),Object(B.f)("EWMAHisVol",Z.EWMAHisVol.text,140,"EWMAHisVol"in m?m.EWMAHisVol:Z.EWMAHisVol.hide),Object(B.h)("BSM_EWMAHisVol",Z.BSM_EWMAHisVol.text,140,2,"BSM_EWMAHisVol"in m?m.BSM_EWMAHisVol:Z.BSM_EWMAHisVol.hide),Object(B.h)("MC_EWMAHisVol",Z.MC_EWMAHisVol.text,140,2,"MC_EWMAHisVol"in m?m.MC_EWMAHisVol:Z.MC_EWMAHisVol.hide),Object(B.h)("BT_EWMAHisVol",Z.BT_EWMAHisVol.text,140,2,"BT_EWMAHisVol"in m?m.BT_EWMAHisVol:Z.BT_EWMAHisVol.hide),{field:"MCChart",headerName:Z.MCChart.text,width:120,renderCell:e=>l.a.createElement(d.a,{size:"small","aria-haspopup":"true",onClick:()=>{t.current.setLoading(!0);const i="/stock/price-simulation-by-mc?symbol="+e.row.symbol+"&iteration=50&mu=0&vol="+e.row.EWMAHisVol+"&days="+Object(L.i)(j()((new Date).toISOString().split("T")[0]),j()(e.row.expiryDate));Promise.all([Object(U.a)(i,J.current.server)]).then(i=>{if(console.log(i),1===i.length&&null!==i[0]){let t=[],a=1===e.row.kind?e.row.strike+e.row.lastPrice:e.row.strike-e.row.lastPrice,r={symbol:e.row.symbol,strike:e.row.strike,cost:a};i[0].mean.forEach((e,a)=>{let l={Mean:parseInt(100*e,10)/100,Name:"Day"+a};i[0].data.forEach((e,t)=>{l["Path-"+String(t).padStart(2,"0")]=parseInt(100*e[a],10)/100}),t.push(l)}),console.log(t),Q.current.popModalWindow(l.a.createElement(R.a,{data:t,iteration:50,info:r}))}else console.error("Call simulation api failed"),Q.current.popModalWindow(l.a.createElement("div",null,"Call simulation api failed"));t.current.setLoading(!1)}).catch(()=>{console.error("Call simulation api failed..."),Q.current.popModalWindow(l.a.createElement("div",null,"Call simulation api failed...")),t.current.setLoading(!1)})}},l.a.createElement(u.a,{color:"primary",style:{fontSize:40}})),hide:"MCChart"in m?m.MCChart:Z.MCChart.hide}],te=Object(P.a)({cachePolicy:"no-cache"}),ie=Object(P.a)({cachePolicy:"no-cache"}),ae=Object(a.useRef)({}),le=Object(P.a)({cachePolicy:"no-cache"}),re=Object(a.useRef)({}),ne=(e,t)=>{var i=[],a=[];e.forEach(e=>{let l=e.symbol,r=e.stockPrice,n=e.stockExtraInfo,o=t?"No Data":"Not Supported",s=0;if(null!=n&&void 0!==n.earningsDate&&null!==n.earningsDate&&""!==n.earningsDate){let e=n.earningsDate.split(" - ");e.forEach((t,i)=>{e[i]=e[i].split(" ")[0],0===i&&(s=new Date(e[i]).getTime())}),o=e.join(" - ")}let c="",d="";l in ae.current&&(c=ae.current[l].ex_dividend_date,d=ae.current[l].link);let m="-";l in re.current&&(m=re.current[l]["Short Float"]);let u=new Date((new Date).toISOString().split("T")[0]),y=e.EWMA_historicalVolatility;e.contracts.forEach(e=>{let t=e.expiryDate,n=(e,i)=>e.map((e,a)=>{let n=e.valuationData,h={id:a,symbol:l,stockPrice:r,stockShortFloat:m,EWMAHisVol:y,kind:i,expiryDate:t,lastTradeDate:void 0!==e.lastTradeDate&&null!==e.lastTradeDate&&"-"!==e.lastTradeDate?e.lastTradeDate:0,strike:void 0!==e.strike&&null!==e.strike&&"-"!==e.strike?e.strike:-Number.MAX_VALUE,lastPrice:void 0!==e.lastPrice&&null!==e.lastPrice&&"-"!==e.lastPrice?e.lastPrice:-Number.MAX_VALUE,bid:void 0!==e.bid&&null!==e.bid&&"-"!==e.bid?e.bid:-Number.MAX_VALUE,ask:void 0!==e.ask&&null!==e.ask&&"-"!==e.ask?e.ask:-Number.MAX_VALUE,change:void 0!==e.change&&null!==e.change&&"-"!==e.change?e.change:-Number.MAX_VALUE,percentChange:void 0!==e.percentChange&&null!==e.percentChange&&"-"!==e.percentChange?e.percentChange/100:-Number.MAX_VALUE,volume:void 0!==e.volume&&null!==e.volume&&"-"!==e.volume?e.volume:-Number.MAX_VALUE,openInterest:void 0!==e.openInterest&&null!==e.openInterest&&"-"!==e.openInterest?e.openInterest:-Number.MAX_VALUE,impliedVolatility:void 0!==e.impliedVolatility&&null!==e.impliedVolatility&&"-"!==e.impliedVolatility?e.impliedVolatility:-Number.MAX_VALUE,BSM_EWMAHisVol:void 0!==n.BSM_EWMAHisVol&&null!==n.BSM_EWMAHisVol&&n.BSM_EWMAHisVol>0?n.BSM_EWMAHisVol:-Number.MAX_VALUE,MC_EWMAHisVol:void 0!==n.MC_EWMAHisVol&&null!==n.MC_EWMAHisVol&&n.MC_EWMAHisVol>0?n.MC_EWMAHisVol:-Number.MAX_VALUE,BT_EWMAHisVol:void 0!==n.BT_EWMAHisVol&&null!==n.BT_EWMAHisVol&&n.BT_EWMAHisVol>0?n.BT_EWMAHisVol:-Number.MAX_VALUE,delta:void 0!==n.delta&&null!==n.delta?n.delta:-Number.MAX_VALUE,gamma:void 0!==n.gamma&&null!==n.gamma?n.gamma:-Number.MAX_VALUE,rho:void 0!==n.rho&&null!==n.rho?n.rho:-Number.MAX_VALUE,theta:void 0!==n.theta&&null!==n.theta?n.theta:-Number.MAX_VALUE,vega:void 0!==n.vega&&null!==n.vega?n.vega:-Number.MAX_VALUE,KellyCriterion_buy:void 0!==n.KellyCriterion_buy&&null!==n.KellyCriterion_buy?n.KellyCriterion_buy:-Number.MAX_VALUE,KellyCriterion_sell:void 0!==n.KellyCriterion_sell&&null!==n.KellyCriterion_sell?n.KellyCriterion_sell:-Number.MAX_VALUE,KellyCriterion_MU_0_buy:void 0!==n.KellyCriterion_MU_0_buy&&null!==n.KellyCriterion_MU_0_buy?n.KellyCriterion_MU_0_buy:-Number.MAX_VALUE,KellyCriterion_MU_0_sell:void 0!==n.KellyCriterion_MU_0_sell&&null!==n.KellyCriterion_MU_0_sell?n.KellyCriterion_MU_0_sell:-Number.MAX_VALUE,KellyCriterion_IV_buy:void 0!==n.KellyCriterion_IV_buy&&null!==n.KellyCriterion_IV_buy?n.KellyCriterion_IV_buy:-Number.MAX_VALUE,KellyCriterion_IV_sell:void 0!==n.KellyCriterion_IV_sell&&null!==n.KellyCriterion_IV_sell?n.KellyCriterion_IV_sell:-Number.MAX_VALUE,earningDate:o,earningDateColor:s>0&&new Date(t).getTime()>=s&&s>=u.getTime()?"red":"",exDividendDate:""!=c?c:"No Data",exDividendLink:d,exDividendDateColor:""!=c&&new Date(t).getTime()>=new Date(c).getTime()&&new Date(c).getTime()>=u.getTime()?"red":"",exerciseProbability:void 0!==n.exerciseProbability&&null!==n.exerciseProbability?n.exerciseProbability:-Number.MAX_VALUE},p=0,_=0;if(h.BSM_EWMAHisVol>0&&(p+=1,_+=h.BSM_EWMAHisVol),h.MC_EWMAHisVol>0&&(p+=1,_+=h.MC_EWMAHisVol),h.BT_EWMAHisVol>0&&(p+=1,_+=h.BT_EWMAHisVol),h.avgEWMA=_/p,h.priceBias=-Number.MAX_VALUE,h.lastPrice!=-Number.MAX_VALUE&&(h.priceBias=Math.abs(h.lastPrice-h.avgEWMA)/h.lastPrice),h.priceStrikeRatio=-Number.MAX_VALUE,h.strike!=-Number.MAX_VALUE&&h.lastPrice!=-Number.MAX_VALUE&&(h.priceStrikeRatio=h.lastPrice/h.strike),h.priceStrikeYearRatio=-Number.MAX_VALUE,h.priceStrikeRatio!=-Number.MAX_VALUE){let e=Math.floor((Date.parse(t)-Date.parse((new Date).toISOString().slice(0,10)))/864e5);h.priceStrikeYearRatio=365*h.priceStrikeRatio/e}return h.distanceRatio=-Number.MAX_VALUE,h.strike!=-Number.MAX_VALUE&&h.stockPrice!=-Number.MAX_VALUE&&(h.distanceRatio=Math.abs(h.stockPrice-h.strike)/h.stockPrice),h});i=i.concat(n(e.calls,1)),a=a.concat(n(e.puts,-1))})}),i.forEach((e,t)=>{i[t].id=t}),a.forEach((e,t)=>{a[t].id=t}),console.log(i),r(i),console.log(a),s(a)},oe=e=>{var i;e.startsWith("self_query")?(T(!0),r([]),s([]),t.current.setLoading(!1)):(T(!1),i=e,t.current.setLoading(!0),Promise.all([Object(U.a)("/norn-data/options/ex_dividend_date_list.json",ie),Object(U.a)("/norn-data/stock/stat.json",le),Object(U.a)("/norn-data/options/"+i+".json",te)]).then(e=>{console.log(e),3===e.length&&null!==e[0]&&null!==e[1]&&null!==e[2]?(ae.current=Object.assign.apply(Object,[{}].concat(Object(o.a)(e[0].data.map(e=>({[e.symbol]:e}))))),re.current=e[1],ne(e[2],!1)):(console.error("renderOptionsData some data failed"),Q.current.popModalWindow(l.a.createElement("div",null,"Get some data failed..."))),t.current.setLoading(!1)}).catch(()=>{console.error("renderOptionsData failed"),Q.current.popModalWindow(l.a.createElement("div",null,"Get data failed...")),t.current.setLoading(!1)}))},se=Object(a.useRef)([]);H.parameters.forEach((e,t)=>{se.current[t]=Object(a.createRef)(),se.current[t].current={value:e.val}});const ce=Object(a.useRef)(null);return Object(a.useEffect)(()=>(oe(I[0].name),()=>{}),[]),Object(U.e)(()=>{F&&F.readyState===WebSocket.OPEN&&(F.send(""),console.log("heartbeat"))},F?3e3:null),Object(a.useEffect)(()=>(F&&(F.onopen=()=>{t.current.setLoading(!0),console.log("WebSocket Connected")},F.onmessage=e=>{const i=JSON.parse(e.data);console.log(i),ne([i],!0),t.current.setLoading(!1),G(null)}),()=>{}),[F]),l.a.createElement("div",{className:X.a.defaultFont+" "+q.a.container},l.a.createElement("div",{key:D.a.generate()},l.a.createElement(E.a,{container:!0,spacing:3},l.a.createElement(E.a,{item:!0,xs:6},l.a.createElement(x.a,{size:"small",variant:"outlined",className:q.a.optionsTableSelect},l.a.createElement(A.a,{htmlFor:"arg-select"},"Options Valuation"),l.a.createElement(C.a,{native:!0,value:p,displayEmpty:!0,onChange:e=>{S(e.target.value),oe(I[e.target.value].name)},label:"Options Valuation"},I.map((e,t)=>l.a.createElement("option",{key:D.a.generate(),index:t,value:t},e.display_name)))))),l.a.createElement("div",{className:q.a.queryPannel,style:{display:O?"block":"none"}},l.a.createElement("div",{className:q.a.parameterTitle},l.a.createElement(g.a,{variant:"h6",gutterBottom:!0,component:"div"},"Query Parameters",l.a.createElement(U.b,{arrow:!0,title:l.a.createElement("span",{style:{fontSize:"14px",whiteSpace:"pre-line",lineHeight:"20px",textAlign:"center"}},W.v)},l.a.createElement(d.a,{onClick:()=>window.open(W.r,"_blank")},l.a.createElement(h.a,{color:"action"}))))),l.a.createElement("div",{className:q.a.parameterBlock},l.a.createElement(E.a,{container:!0,spacing:2},l.a.createElement(Y,{queryParameterRef:se,queryParameterCurrentRef:ce}),l.a.createElement(E.a,{item:!0,md:2,xs:12},l.a.createElement(b.a,{display:"flex",justifyContent:"flex-end"},l.a.createElement(f.a,{theme:Object(k.a)({palette:{primary:V.a}})},l.a.createElement(_.a,{className:N.isMobile?q.a.queryBtnMobile:q.a.queryBtn,variant:"contained",color:"primary",startIcon:l.a.createElement(c.a,null),onClick:()=>{ce.current=[];let e=H.parameters.reduce((e,t,i)=>(e[t.name]=se.current[i].current.value,ce.current.push(e[t.name]),e),{});console.log(e);let t="/ws/option/quote-valuation?"+Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")+"&calc_kelly_iv=true&iteration=20";G(new WebSocket("wss://"+W.q+t))}},"Query Now"))))))),l.a.createElement("div",{className:q.a.table},l.a.createElement(M.a,{rows:i,columns:ee(),components:{NoRowsOverlay:K.a},disableSelectionOnClick:!0,onColumnVisibilityChange:e=>{let t=m;t[e.field]=!e.isVisible,y(t)},initialState:{filter:{filterModel:{items:[{columnField:"lastPrice",operatorValue:">",value:.1}]}},sorting:{sortModel:[{field:"priceBias",sort:"desc"}]}}})),l.a.createElement("div",{className:q.a.table},l.a.createElement(M.a,{rows:n,columns:ee(),components:{NoRowsOverlay:K.a},disableSelectionOnClick:!0,onColumnVisibilityChange:e=>{let t=m;t[e.field]=!e.isVisible,y(t)},initialState:{filter:{filterModel:{items:[{columnField:"lastPrice",operatorValue:">",value:.1}]}},sorting:{sortModel:[{field:"priceBias",sort:"desc"}]}}}))),l.a.createElement(w.a,{modalWindowRef:Q}),l.a.createElement(z,{FetchNornFinanceAPIServerRef:J}))},Q=i("3Y3G"),J=i("vrFN");t.default=()=>{const e=Object(a.useRef)({getLoading:null,setLoading:null});return l.a.createElement(r.a,{injectFirst:!0},l.a.createElement(J.a,null),l.a.createElement(n.a,null,l.a.createElement(G,{loadingAnimeRef:e})),l.a.createElement(Q.a,{loadingAnimeRef:e}))}},"4cdY":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var a=i("hszt"),l=i("wcMh"),r=i("J+eN"),n=i("b+jq"),o=i("Ao2N"),s=Object(a.a)({chartName:"LineChart",GraphicalChild:l.a,axisComponents:[{axisType:"xAxis",AxisComp:r.a},{axisType:"yAxis",AxisComp:n.a}],formatAxisMap:o.b})},DbNq:function(e,t,i){"use strict";var a=i("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(i("jelL")),r=i("nKUr");t.default=(0,l.default)((0,r.jsx)("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChartSharp")},Ogif:function(e,t,i){"use strict";var a=i("dI71"),l=i("q1tI"),r=i.n(l),n=i("je4i"),o=i.n(n),s=i("wcMh"),c=i("lQYU"),d=i("FQZO"),m=i("ps87"),u=i("4cdY"),y=i("y9N3"),h=i("J+eN"),p=i("b+jq"),_=i("nJDY");let b=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.render=function(){const{x:e,y:t,stroke:i,value:a,fontSize:l}=this.props;return r.a.createElement("text",{x:e,y:t,dy:-4,fill:i,fontSize:l,textAnchor:"middle"},a)},t}(l.PureComponent);t.a=e=>{let{data:t,iteration:i,info:a,show_mean_label:l=!0,modal_mode:n=!0}=e;const E=Array(i).fill(0).map((e,t)=>r.a.createElement(s.a,{key:o.a.generate(),type:"monotone",dataKey:"Path-"+String(t).padStart(2,"0"),stroke:"#d3d3d3",dot:!1,strokeWidth:2})),M="strike"in a&&"cost"in a?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{y:a.strike,label:{position:"insideBottomLeft",value:"Strike: "+a.strike,fill:"red",fontSize:14},stroke:"red",strokeDasharray:"3 3"}),r.a.createElement(c.a,{y:a.cost,label:{position:"insideTopLeft",value:"Cost: "+a.cost,fill:"blue",fontSize:14},stroke:"blue",strokeDasharray:"3 3"})):r.a.createElement(r.a.Fragment,null),v="symbol"in a?r.a.createElement(d.a,{value:"Symbol: "+a.symbol,offset:5,position:"bottom",fill:"#8884d8",fontSize:16}):r.a.createElement(r.a.Fragment,null),A=n?{width:window.innerWidth-100+"px",height:window.innerHeight-100+"px",maxWidth:"1200px",maxHeight:"600px"}:{width:"100%",height:"100%"};return r.a.createElement("div",{style:A},r.a.createElement(m.a,{width:"100%",height:"100%"},r.a.createElement(u.a,{data:t,margin:{top:5,right:30,left:20,bottom:20}},r.a.createElement(y.a,{strokeDasharray:"3 3"}),r.a.createElement(h.a,{dataKey:"Name"},v),r.a.createElement(p.a,{domain:["auto","auto"]}),r.a.createElement(_.a,{itemSorter:e=>e.name}),E,r.a.createElement(s.a,{type:"monotone",dataKey:"Mean",stroke:"#FF8042",strokeWidth:3,label:l?r.a.createElement(b,{stroke:"#FF8042",fontSize:14}):r.a.createElement(r.a.Fragment,null)}),M)))}},cD7S:function(e,t,i){"use strict";var a=i("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(i("jelL")),r=i("nKUr");t.default=(0,l.default)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info")},ej0n:function(e,t,i){e.exports={container:"options-module--container--2g_bX",optionsTableSelect:"options-module--optionsTableSelect--2h6H5",queryPannel:"options-module--queryPannel--2bEK-",parameterTitle:"options-module--parameterTitle--1emU9",parameterBlock:"options-module--parameterBlock--2QBHO",valueText:"options-module--valueText--1ha1M",queryBtn:"options-module--queryBtn--3ljAN",queryBtnMobile:"options-module--queryBtnMobile--1UsUa",table:"options-module--table--16_cs"}}}]);
//# sourceMappingURL=component---src-pages-options-valuation-js-e5e6c0e6ffaac314ebfe.js.map