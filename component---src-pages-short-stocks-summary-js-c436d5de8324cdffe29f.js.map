{"version":3,"sources":["webpack:///./node_modules/recharts/es6/chart/LineChart.js","webpack:///./src/components/short-stocks/shortStocksSummary.module.scss","webpack:///./src/components/short-stocks/stockAndShortDataChart.js","webpack:///./src/components/short-stocks/shortStocksSummary.js","webpack:///./src/pages/short-stocks-summary.js"],"names":["LineChart","chartName","GraphicalChild","axisComponents","axisType","AxisComp","formatAxisMap","module","exports","StockAndShortDataChart","_ref","title","data","React","createElement","style","width","window","innerWidth","height","innerHeight","maxWidth","maxHeight","ResponsiveContainer","ComposedChart","syncId","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","XAxis","dataKey","tickFormatter","tickItem","moment","format","YAxis","yAxisId","domain","orientation","Tooltip","Legend","wrapperStyle","Line","connectNulls","type","name","stroke","dot","Bar","fill","tick","unit","ShortStocksSummary","loadingAnimeRef","hideColState","setHideColState","useState","modalWindowRef","useRef","popModalWindow","popPureModal","tableColList","hide","text","getData","async","url","fetchObj","resp_data","get","response","ok","renderShowChart","symbol","shsFloat","console","log","Promise","all","fetchStockData","fetchShortData","then","allResponses","length","startDate","Date","now","forEach","val","Number","MAX_VALUE","parseInt","allDateByKey","convertData2DictByDate","dateKey","key","valueKey","Array","isArray","date","parse","toLocaleDateString","allDataArray","targetKeys","Object","keys","sort","o","push","current","catch","useFetch","cachePolicy","renderShortStocksTable","config","showChart","output","reduce","result","index","stockInfo","value","id","close","shortInterest","shortFloat","shortRatio","SF0_5m","SF1m","SF1_5m","SF0_5y","SF1y","SR0_5m","SR1m","SR1_5m","SR0_5y","SR1y","PE","PB","dividend","high52","low52","perfWeek","perfMonth","perfQuarter","perfHalfY","perfYear","perfYTD","filter_symbols","includes","setRowData","setLoading","rowData","searchVal","setSearchVal","useEffect","queryParameters","URLSearchParams","location","search","Fragment","className","shortStocksSummaryStyle","container","table","DataGrid","rows","columns","SymbolNameField","PriceField","field","headerName","renderCell","params","undefined","NoMaxWidthTooltip","arrow","fontSize","whiteSpace","lineHeight","textAlign","row","toFixed","ColorPercentField","PureFieldWithValueCheck","PercentField","IconButton","size","aria-haspopup","onClick","BarChartSharpIcon","color","components","NoRowsOverlay","DefaultDataGridTable","Toolbar","SearchGridToolbar","clickCallback","info","placeholder","tooltip","ShortStockDataSourceTooltip","link","FINRAShortInterestUrl","disableSelectionOnClick","onColumnVisibilityChange","param","tempHideColState","ModalWindow","ShortStocksSummaryPage","getLoading","StylesProvider","injectFirst","SEO","Layout","LoadingAnime"],"mappings":"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","file":"component---src-pages-short-stocks-summary-js-c436d5de8324cdffe29f.js","sourcesContent":["/**\n * @fileOverview Line Chart\n */\nimport { generateCategoricalChart } from './generateCategoricalChart';\nimport { Line } from '../cartesian/Line';\nimport { XAxis } from '../cartesian/XAxis';\nimport { YAxis } from '../cartesian/YAxis';\nimport { formatAxisMap } from '../util/CartesianUtils';\nexport var LineChart = generateCategoricalChart({\n  chartName: 'LineChart',\n  GraphicalChild: Line,\n  axisComponents: [{\n    axisType: 'xAxis',\n    AxisComp: XAxis\n  }, {\n    axisType: 'yAxis',\n    AxisComp: YAxis\n  }],\n  formatAxisMap: formatAxisMap\n});","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"shortStocksSummary-module--container--2vfLp\",\"showColumn\":\"shortStocksSummary-module--showColumn--FOE5m\",\"table\":\"shortStocksSummary-module--table--KMXXu\"};","import React from 'react'\r\nimport {\r\n  LineChart,\r\n  ComposedChart,\r\n  Line,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer\r\n} from 'recharts'\r\n\r\nimport moment from 'moment'\r\n\r\nconst StockAndShortDataChart = ({ title, data }) => {\r\n  return (\r\n    <div style={{ width: (window.innerWidth - 80) + 'px', height: (window.innerHeight - 80) + 'px', maxWidth: '1200px', maxHeight: '800px' }}>\r\n      <h3>{title}</h3>\r\n      <ResponsiveContainer width=\"100%\" height=\"32%\">\r\n        <ComposedChart\r\n          data={data}\r\n          syncId=\"StockAndShortDataChart\"\r\n          margin={{\r\n            top: 5,\r\n            right: 30,\r\n            left: 20,\r\n            bottom: 5,\r\n          }}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis dataKey=\"Date\" tickFormatter={(tickItem) => {\r\n            return moment(tickItem).format('MM/DD/YYYY')\r\n          }} />\r\n          <YAxis yAxisId=\"left\" domain={['auto', 'auto']}/>\r\n          <YAxis yAxisId=\"right\" orientation=\"right\" domain={['auto', 'auto']}/>\r\n          <Tooltip />\r\n          <Legend wrapperStyle={{ bottom: -5 }}/>\r\n          <Line connectNulls yAxisId=\"left\" type=\"monotone\" name={\"Close Price\"} dataKey=\"close\" stroke=\"#8884d8\" dot={false} />\r\n          <Bar yAxisId=\"right\" name={\"Volume\"} dataKey=\"volume\" fill=\"#82ca9d\" />\r\n        </ComposedChart>\r\n      </ResponsiveContainer>     \r\n      <ResponsiveContainer width=\"100%\" height=\"32%\">\r\n        <ComposedChart\r\n          data={data}\r\n          syncId=\"StockAndShortDataChart\"\r\n          margin={{\r\n            top: 5,\r\n            right: 30,\r\n            left: 20,\r\n            bottom: 5,\r\n          }}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis dataKey=\"Date\" tickFormatter={(tickItem) => {\r\n            return moment(tickItem).format('MM/DD/YYYY')\r\n          }} />\r\n          <YAxis yAxisId=\"left\" domain={['auto', 'auto']}/>\r\n          <YAxis yAxisId=\"right\" orientation=\"right\" domain={['auto', 'auto']}/>\r\n          <Tooltip />\r\n          <Legend wrapperStyle={{ bottom: -5 }}/>\r\n          <Line connectNulls yAxisId=\"left\" type=\"monotone\" name={\"Short Interest\"} dataKey=\"shortInterest\" stroke=\"#FF8042\" />\r\n          <Bar yAxisId=\"right\" name={\"Avg Daily Volume\"} dataKey=\"avgDailyVolume\" fill=\"#00C49F\" />\r\n        </ComposedChart>\r\n      </ResponsiveContainer>     \r\n      <ResponsiveContainer width=\"100%\" height=\"32%\">\r\n        <LineChart\r\n          data={data}\r\n          syncId=\"StockAndShortDataChart\"\r\n          margin={{\r\n            top: 5,\r\n            right: 30,\r\n            left: 20,\r\n            bottom: 5,\r\n          }}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis dataKey=\"Date\" tickFormatter={(tickItem) => {\r\n            return moment(tickItem).format('MM/DD/YYYY')\r\n          }} />\r\n          <YAxis yAxisId=\"left\" tickFormatter={(tick) => {\r\n            return `${tick}%`;\r\n          }} domain={['auto', 'auto']}/>\r\n          <YAxis yAxisId=\"right\"  orientation=\"right\" domain={['auto', 'auto']}/>\r\n          <Tooltip />\r\n          <Legend />\r\n          <Line yAxisId=\"left\" connectNulls type=\"monotone\" name={\"Short Float\"} dataKey=\"shortFloat\" unit=\"%\" stroke=\"#0088FE\"/>\r\n          <Line yAxisId=\"right\" connectNulls type=\"monotone\" name={\"Short Ratio\"} dataKey=\"shortRatio\" stroke=\"#AA336A\"/>\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default StockAndShortDataChart\r\n","\r\nimport React, { useState, useRef, useEffect } from 'react'\r\nimport { DataGrid } from '@mui/x-data-grid'\r\nimport IconButton from '@mui/material/IconButton'\r\nimport BarChartSharpIcon from '@mui/icons-material/BarChartSharp'\r\nimport useFetch from 'use-http'\r\nimport moment from 'moment'\r\n\r\nimport StockAndShortDataChart from './stockAndShortDataChart'\r\nimport ModalWindow from '../modalWindow'\r\nimport DefaultDataGridTable from '../defaultDataGridTable'\r\nimport SearchGridToolbar from '../searchGridToolbar'\r\nimport { FINRAShortInterestUrl, ShortStockDataSourceTooltip } from '../../common/common'\r\nimport { SymbolNameField, PriceField, PureFieldWithValueCheck, PercentField, ColorPercentField } from '../../common/dataGridUtil'\r\nimport { NoMaxWidthTooltip } from '../../common/reactUtils'\r\n\r\nimport shortStocksSummaryStyle from './shortStocksSummary.module.scss'\r\nimport '../muiTablePagination.css'\r\n\r\nconst ShortStocksSummary = ({ loadingAnimeRef }) => {\r\n\r\n  const [hideColState, setHideColState] = useState({})\r\n\r\n  const modalWindowRef = useRef({\r\n    popModalWindow: null,\r\n    popPureModal: null,\r\n  })\r\n\r\n  const tableColList = {\r\n    Close: { hide: false, text: 'Price' },\r\n    ShortFloat: { hide: false, text: 'Short Float' },\r\n    ShortRatio: { hide: false, text: 'Short Ratio' },\r\n    SF0_5m: { hide: false, text: 'SF-15d' },\r\n    SF1m: { hide: false, text: 'SF-30d' },\r\n    SF1_5m: { hide: false, text: 'SF-45d' },\r\n    SF0_5y: { hide: true, text: 'SF-6mo' },\r\n    SF1y: { hide: true, text: 'SF-1yr' },\r\n    SR0_5m: { hide: false, text: 'SR-15d' },\r\n    SR1m: { hide: false, text: 'SR-30d' },\r\n    SR1_5m: { hide: false, text: 'SR-45d' },\r\n    SR0_5y: { hide: true, text: 'SR-6mo' },\r\n    SR1y: { hide: true, text: 'SR-1yr' },\r\n    PE: { hide: false, text: 'P/E' },\r\n    PB: { hide: false, text: 'P/B' },\r\n    Dividend: { hide: false, text: 'Dividend %' },\r\n    High52: { hide: false, text: '52W High' },\r\n    Low52: { hide: false, text: '52W Low' },\r\n    PerfWeek: { hide: false, text: 'Perf Week' },\r\n    PerfMonth: { hide: false, text: 'Perf Month' },\r\n    PerfQuarter: { hide: false, text: 'Perf Quarter' },\r\n    PerfHalfY: { hide: false, text: 'Perf Half Y' },\r\n    PerfYear: { hide: false, text: 'Perf Year' },\r\n    PerfYTD: { hide: false, text: 'Perf YTD' },\r\n    Chart: { hide: false, text: 'Chart' },\r\n  }\r\n\r\n  const getData = async (url, fetchObj) => {\r\n    const resp_data = await fetchObj.get(url)\r\n    if (fetchObj.response.ok && resp_data) {\r\n      return resp_data\r\n    }\r\n    else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  const renderShowChart = (symbol, shsFloat)=> {\r\n    console.log(symbol)\r\n    console.log(shsFloat)\r\n    Promise.all([\r\n      getData(\"/norn-data/stock/historical-quotes/\" + symbol+\".json\", fetchStockData),\r\n      getData(\"/norn-data/stock-short/historical-quotes/\" + symbol+\".json\", fetchShortData),\r\n    ]).then((allResponses) => {\r\n      // console.log(allResponses)\r\n      if (allResponses.length === 2 && allResponses[0] !== null && allResponses[1] !== null) {\r\n        let startDate = new Date(Date.now() - 365*24*60*60*1000)\r\n        if (allResponses[0].length > 0) {\r\n          startDate = new Date(allResponses[0][allResponses[0].length-1].Date)\r\n        }\r\n        // add short float & ratio\r\n        allResponses[1].forEach((val) => {\r\n          if (shsFloat != -Number.MAX_VALUE) {\r\n            val['shortFloat'] = parseInt(val['currentShortPositionQuantity'] / shsFloat * 10000, 10) / 100.0\r\n          } \r\n          \r\n          val['shortRatio'] = parseInt(val['currentShortPositionQuantity'] / val['averageDailyVolumeQuantity'] * 100, 10) / 100.0\r\n        })\r\n\r\n        let allDateByKey = {}\r\n        const convertData2DictByDate = (data, dateKey, key, valueKey) => {\r\n          if (data && !Array.isArray(data)) {\r\n            console.log(\"data is not array\")\r\n            return\r\n          }\r\n\r\n          data.forEach((val) => {\r\n            let date = Date.parse(new Date(Date.parse(val[dateKey])).toLocaleDateString()) // align timezone\r\n            if (date < startDate) {\r\n              return\r\n            }\r\n            if (!(date in allDateByKey)) {\r\n              allDateByKey[date] = {}\r\n            }\r\n            allDateByKey[date][key] = val[valueKey]\r\n          })\r\n        }\r\n        convertData2DictByDate(allResponses[0], \"Date\", \"close\", \"Close\")\r\n        convertData2DictByDate(allResponses[0], \"Date\", \"volume\", \"Volume\")\r\n        convertData2DictByDate(allResponses[1], \"settlementDate\", \"shortInterest\", \"currentShortPositionQuantity\")\r\n        convertData2DictByDate(allResponses[1], \"settlementDate\", \"avgDailyVolume\", \"averageDailyVolumeQuantity\")\r\n        convertData2DictByDate(allResponses[1], \"settlementDate\", \"shortFloat\", \"shortFloat\")\r\n        convertData2DictByDate(allResponses[1], \"settlementDate\", \"shortRatio\", \"shortRatio\")\r\n        //console.log(allDateByKey)\r\n        let allDataArray = []\r\n        let targetKeys = [\"close\", \"volume\", \"shortInterest\", \"avgDailyVolume\", \"shortFloat\", \"shortRatio\"]\r\n        Object.keys(allDateByKey).sort().forEach((key) => {\r\n          let o = { Date: moment(parseInt(key)).format('MM/DD/YYYY') }\r\n          targetKeys.forEach((val) => {\r\n            if (val in allDateByKey[key]) {\r\n              o[val] = allDateByKey[key][val]\r\n            }\r\n          })\r\n          allDataArray.push(o)\r\n        })\r\n        console.log(allDataArray)\r\n        const title = `${symbol} (${allResponses[1][0][\"issueName\"]}) Chart`\r\n        modalWindowRef.current.popModalWindow(<StockAndShortDataChart title={title} data={allDataArray} />)\r\n      } else {\r\n        modalWindowRef.current.popModalWindow(<div>Load some data failed</div>)\r\n      }\r\n    }).catch(() => {\r\n      modalWindowRef.current.popModalWindow(<div>Can't draw stock price & short chart</div>)\r\n    })\r\n  }\r\n\r\n  const genTableColTemplate = () => {\r\n    return [\r\n      SymbolNameField('Symbol', 130, 'symbol' in hideColState ? hideColState['symbol'] : false),\r\n      PriceField('close', tableColList.Close.text, 110, 'close' in hideColState ? hideColState['close'] : tableColList['Close'].hide, null, \"yahoo\"),\r\n      {\r\n        field: \"shortFloat\",\r\n        headerName: 'Short Float',\r\n        width: 110,\r\n        type: 'number',\r\n        renderCell: (params) => (\r\n          params.value === \"-\" || params.value === -Number.MAX_VALUE || params.value === Number.MAX_VALUE || params.value === null || params.value === undefined || params.value === \"Infinity\" || params.value === 'NaN'  ?\r\n            <span>-</span> :\r\n            <NoMaxWidthTooltip arrow title={<span style={{ fontSize: '14px', whiteSpace: 'pre-line', lineHeight: '20px', textAlign: 'center'}}>{\r\n              (params.row[\"shortInterest\"]) + \" / \" + (params.row[\"shsFloat\"])\r\n            }</span>} >\r\n              <span>{(params.value * 100).toFixed(2) + \"%\"}</span>\r\n            </NoMaxWidthTooltip>\r\n        ),\r\n        hide: \"shortFloat\" in hideColState ? hideColState[\"shortFloat\"] : tableColList['ShortFloat'].hide\r\n      },\r\n      {\r\n        field: \"shortRatio\",\r\n        headerName: 'Short Ratio',\r\n        width: 110,\r\n        type: 'number',\r\n        renderCell: (params) => (\r\n          params.value === \"-\" || params.value === -Number.MAX_VALUE || params.value === Number.MAX_VALUE || params.value === null || params.value === undefined || params.value === \"Infinity\" || params.value === 'NaN'  ?\r\n            <span>-</span> :\r\n            <NoMaxWidthTooltip arrow title={<span style={{ fontSize: '14px', whiteSpace: 'pre-line', lineHeight: '20px', textAlign: 'center'}}>{\r\n              (params.row[\"shortInterest\"]) + \" / \" + (params.row[\"shsFloat\"])\r\n            }</span>} >\r\n              <span>{(params.value).toFixed(2)}</span>\r\n            </NoMaxWidthTooltip>\r\n        ),\r\n        hide: \"shortFloat\" in hideColState ? hideColState[\"shortFloat\"] : tableColList['ShortFloat'].hide\r\n      },\r\n      ColorPercentField(\"SF0_5m\", tableColList.SF0_5m.text, 150, 2, \"SF0_5m\" in hideColState ? hideColState[\"SF0_5m\"] : tableColList['SF0_5m'].hide, 500, 'Short Float Latest 15 Days Changed (%)', -1),\r\n      ColorPercentField(\"SF1m\", tableColList.SF1m.text, 150, 2, \"SF1m\" in hideColState ? hideColState[\"SF1m\"] : tableColList['SF1m'].hide, 500, 'Short Float Latest 30 Days Changed (%)', -1),\r\n      ColorPercentField(\"SF1_5m\", tableColList.SF1_5m.text, 150, 2, \"SF1_5m\" in hideColState ? hideColState[\"SF1_5m\"] : tableColList['SF1_5m'].hide, 500, 'Short Float Latest 45 Days Changed (%)', -1),\r\n      ColorPercentField(\"SF0_5y\", tableColList.SF0_5y.text, 150, 2, \"SF0_5y\" in hideColState ? hideColState[\"SF0_5y\"] : tableColList['SF0_5y'].hide, 500, 'Short Float Latest 6 Months Changed (%)', -1),\r\n      ColorPercentField(\"SF1y\", tableColList.SF1y.text, 150, 2, \"SF1y\" in hideColState ? hideColState[\"SF1y\"] : tableColList['SF1y'].hide, 500, 'Short Float Latest 1 Years Changed (%)', -1),\r\n      ColorPercentField(\"SR0_5m\", tableColList.SR0_5m.text, 150, 2, \"SR0_5m\" in hideColState ? hideColState[\"SR0_5m\"] : tableColList['SR0_5m'].hide, 500, 'Short Ratio Latest 15 Days Changed (%)', -1),\r\n      ColorPercentField(\"SR1m\", tableColList.SR1m.text, 150, 2, \"SR1m\" in hideColState ? hideColState[\"SR1m\"] : tableColList['SR1m'].hide, 500, 'Short Ratio Latest 30 Days Changed (%)', -1),\r\n      ColorPercentField(\"SR1_5m\", tableColList.SR1_5m.text, 150, 2, \"SR1_5m\" in hideColState ? hideColState[\"SR1_5m\"] : tableColList['SR1_5m'].hide, 500, 'Short Ratio Latest 45 Days Changed (%)', -1),\r\n      ColorPercentField(\"SR0_5y\", tableColList.SR0_5y.text, 150, 2, \"SR0_5y\" in hideColState ? hideColState[\"SR0_5y\"] : tableColList['SR0_5y'].hide, 500, 'Short Ratio Latest 6 Months Changed (%)', -1),\r\n      ColorPercentField(\"SR1y\", tableColList.SR1y.text, 150, 2, \"SR1y\" in hideColState ? hideColState[\"SR1y\"] : tableColList['SR1y'].hide, 500, 'Short Ratio Latest 1 Years Changed (%)', -1),\r\n      PureFieldWithValueCheck(\"PE\", tableColList.PE.text, 110, 2, \"PE\" in hideColState ? hideColState[\"PE\"] : tableColList['PE'].hide),\r\n      PureFieldWithValueCheck(\"PB\", tableColList.PB.text, 110, 2, \"PB\" in hideColState ? hideColState[\"PB\"] : tableColList['PB'].hide),\r\n      PercentField(\"dividend\", tableColList.Dividend.text, 150, \"dividend\" in hideColState ? hideColState[\"dividend\"] : tableColList['Dividend'].hide),\r\n      PercentField(\"high52\", tableColList.High52.text, 150, \"high52\" in hideColState ? hideColState[\"high52\"] : tableColList['High52'].hide),\r\n      PercentField(\"low52\", tableColList.Low52.text, 150, \"low52\" in hideColState ? hideColState[\"low52\"] : tableColList['Low52'].hide),\r\n      ColorPercentField(\"perfWeek\", tableColList.PerfWeek.text, 150, 2, \"perfWeek\" in hideColState ? hideColState[\"perfWeek\"] : tableColList['PerfWeek'].hide, 500),\r\n      ColorPercentField(\"perfMonth\", tableColList.PerfMonth.text, 150, 2, \"perfMonth\" in hideColState ? hideColState[\"perfMonth\"] : tableColList['PerfMonth'].hide, 500),\r\n      ColorPercentField(\"perfQuarter\", tableColList.PerfQuarter.text, 150, 2, \"perfQuarter\" in hideColState ? hideColState[\"perfQuarter\"] : tableColList['PerfQuarter'].hide, 500),\r\n      ColorPercentField(\"perfHalfY\", tableColList.PerfHalfY.text, 150, 2, \"perfHalfY\" in hideColState ? hideColState[\"perfHalfY\"] : tableColList['PerfHalfY'].hide, 500),\r\n      ColorPercentField(\"perfYear\", tableColList.PerfYear.text, 150, 2, \"perfYear\" in hideColState ? hideColState[\"perfYear\"] : tableColList['PerfYear'].hide, 500),\r\n      ColorPercentField(\"perfYTD\", tableColList.PerfYTD.text, 150, 2, \"perfYTD\" in hideColState ? hideColState[\"perfYTD\"] : tableColList['PerfYTD'].hide, 500),\r\n      {\r\n        field: 'Chart',\r\n        headerName: tableColList.Chart.text,\r\n        width: 130,\r\n        renderCell: (params) => (\r\n          <IconButton\r\n            size=\"small\"\r\n            aria-haspopup=\"true\"\r\n            onClick={()=>{\r\n              renderShowChart(params.row[\"symbol\"], params.row[\"shsFloat\"])\r\n            }}\r\n          >\r\n            <BarChartSharpIcon color=\"primary\" style={{ fontSize: 40 }} />\r\n          </IconButton>\r\n        ),\r\n        hide: 'Chart' in hideColState ? hideColState['Chart'] : tableColList['Chart'].hide\r\n      },\r\n    ]\r\n  }\r\n\r\n  const fetchStockData = useFetch({ cachePolicy: 'no-cache' })\r\n  const fetchShortData = useFetch({ cachePolicy: 'no-cache' })\r\n  const renderShortStocksTable = (config, showChart)=>{\r\n    Promise.all([\r\n      getData(\"/norn-data/stock/stat.json\", fetchStockData),\r\n      getData('/norn-data/stock-short/stat.json', fetchShortData),\r\n    ]).then((allResponses) => {\r\n      // console.log(allResponses)\r\n      if (allResponses.length === 2 && allResponses[0] !== null && allResponses[1] !== null) {      \r\n        let output = Object.keys(allResponses[1][\"data\"]).reduce((result, symbol, index) => {\r\n          let stockInfo = allResponses[0][symbol]\r\n          let value = allResponses[1][\"data\"][symbol]\r\n          let o = {\r\n            id: index,\r\n            symbol: symbol,\r\n            close: stockInfo !== undefined && stockInfo !== null && stockInfo['Close'] !== '-' ? stockInfo['Close'] : -Number.MAX_VALUE,\r\n            shsFloat: value['Shs Float'] !== '-' ? value['Shs Float'] : -Number.MAX_VALUE,\r\n            shortInterest: value['Short Interest'] !== '-' ? value['Short Interest'] : -Number.MAX_VALUE,\r\n            shortFloat: value['Short Float'] !== '-' ? value['Short Float'] : -Number.MAX_VALUE,\r\n            shortRatio: value['Short Ratio'] !== '-' ? value['Short Ratio'] : -Number.MAX_VALUE,\r\n            SF0_5m: value['SF-0.5m'] !== '-' ? value['SF-0.5m'] : -Number.MAX_VALUE,\r\n            SF1m: value['SF-1m'] !== '-' ? value['SF-1m'] : -Number.MAX_VALUE,\r\n            SF1_5m: value['SF-1.5m'] !== '-' ? value['SF-1.5m'] : -Number.MAX_VALUE,\r\n            SF0_5y: value['SF-0.5y'] !== '-' ? value['SF-0.5y'] : -Number.MAX_VALUE,\r\n            SF1y: value['SF-1y'] !== '-' ? value['SF-1y'] : -Number.MAX_VALUE,\r\n            SR0_5m: value['SR-0.5m'] !== '-' ? value['SR-0.5m'] : -Number.MAX_VALUE,\r\n            SR1m: value['SR-1m'] !== '-' ? value['SR-1m'] : -Number.MAX_VALUE,\r\n            SR1_5m: value['SR-1.5m'] !== '-' ? value['SR-1.5m'] : -Number.MAX_VALUE,\r\n            SR0_5y: value['SR-0.5y'] !== '-' ? value['SR-0.5y'] : -Number.MAX_VALUE,\r\n            SR1y: value['SR-1y'] !== '-' ? value['SR-1y'] : -Number.MAX_VALUE,\r\n            PE: stockInfo !== undefined && stockInfo !== null && stockInfo['P/E'] !== '-' ? stockInfo['P/E'] : Number.MAX_VALUE,\r\n            PB: stockInfo !== undefined && stockInfo !== null && stockInfo['P/B'] !== '-' ? stockInfo['P/B'] : Number.MAX_VALUE,\r\n            dividend: stockInfo !== undefined && stockInfo !== null && stockInfo['Dividend %'] !== '-' ? stockInfo['Dividend %'] : -Number.MAX_VALUE,\r\n            high52: stockInfo !== undefined && stockInfo !== null && stockInfo['52W High'] !== '-' ? stockInfo['52W High'] : -Number.MAX_VALUE,\r\n            low52: stockInfo !== undefined && stockInfo !== null && stockInfo['52W Low'] !== '-' ? stockInfo['52W Low'] : -Number.MAX_VALUE,\r\n            perfWeek: stockInfo !== undefined && stockInfo !== null && stockInfo['Perf Week'] !== '-' ? stockInfo['Perf Week'] : -Number.MAX_VALUE,\r\n            perfMonth: stockInfo !== undefined && stockInfo !== null && stockInfo['Perf Month'] !== '-' ? stockInfo['Perf Month'] : -Number.MAX_VALUE,\r\n            perfQuarter: stockInfo !== undefined && stockInfo !== null && stockInfo['Perf Quarter'] !== '-' ? stockInfo['Perf Quarter'] : -Number.MAX_VALUE,\r\n            perfHalfY: stockInfo !== undefined && stockInfo !== null && stockInfo['Perf Half Y'] !== '-' ? stockInfo['Perf Half Y'] : -Number.MAX_VALUE,\r\n            perfYear: stockInfo !== undefined && stockInfo !== null && stockInfo['Perf Year'] !== '-' ? stockInfo['Perf Year'] : -Number.MAX_VALUE,\r\n            perfYTD: stockInfo !== undefined && stockInfo !== null && stockInfo['Perf YTD'] !== '-' ? stockInfo['Perf YTD'] : -Number.MAX_VALUE,\r\n          }\r\n\r\n          if(config.filter_symbols.length === 0 || config.filter_symbols.includes(symbol)) {\r\n            result.push(o)\r\n          }\r\n          return result\r\n        }, [])\r\n        console.log(output)\r\n        setRowData(output)\r\n        if (showChart) {\r\n          renderShowChart(output[0][\"symbol\"], output[0][\"shsFloat\"])\r\n        }\r\n      } else {\r\n        modalWindowRef.current.popModalWindow(<div>Load some data failed</div>)\r\n      }\r\n      loadingAnimeRef.current.setLoading(false)\r\n    }).catch(() => {\r\n      modalWindowRef.current.popModalWindow(<div>Can't get data</div>)\r\n      loadingAnimeRef.current.setLoading(false)\r\n    })\r\n  }\r\n\r\n  const [rowData, setRowData] = useState([])\r\n  const [searchVal, setSearchVal] = useState(\"\")\r\n  useEffect(() => {\r\n    // componentDidMount is here!\r\n    // componentDidUpdate is here!\r\n    let config = {filter_symbols: []}\r\n    let showChart = false\r\n    if (typeof window !== 'undefined') {\r\n      const queryParameters = new URLSearchParams(window.location.search)\r\n      let symbol = queryParameters.get(\"symbol\")\r\n      if (symbol) {\r\n        config = {filter_symbols: [symbol]}\r\n      }\r\n      showChart = queryParameters.get(\"showChart\") === \"true\"\r\n    }\r\n    renderShortStocksTable(config, showChart)\r\n    return () => {\r\n      // componentWillUnmount is here!\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <div className={shortStocksSummaryStyle.container}>\r\n        <div className={shortStocksSummaryStyle.table}>\r\n          <DataGrid rows={rowData} columns={genTableColTemplate()} components={{ NoRowsOverlay: DefaultDataGridTable, Toolbar: ()=>{\r\n            return <SearchGridToolbar searchVal={searchVal} setSearchVal={setSearchVal} clickCallback={(config)=>{\r\n              renderShortStocksTable(config, false)\r\n            }} \r\n              info={{\r\n                placeholder: 'Filter symbols: AAPL, BAC, KSS, ...',\r\n                tooltip: {\r\n                  text: ShortStockDataSourceTooltip,\r\n                  link: FINRAShortInterestUrl\r\n                }\r\n              }}\r\n            />\r\n          }}} disableSelectionOnClick onColumnVisibilityChange={(param) => {\r\n            let tempHideColState = hideColState\r\n            tempHideColState[param['field']] = !param['isVisible']\r\n            setHideColState(tempHideColState)\r\n          }}\r\n          />\r\n        </div>\r\n      </div>\r\n      <ModalWindow modalWindowRef={modalWindowRef} />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ShortStocksSummary\r\n","import React, { useRef } from 'react'\r\nimport { StylesProvider } from '@mui/styles'\r\n\r\nimport Layout from '../components/layout'\r\nimport ShortStocksSummary from '../components/short-stocks/shortStocksSummary'\r\nimport LoadingAnime from '../components/loadingAnime'\r\nimport SEO from '../components/seo'\r\n\r\nconst ShortStocksSummaryPage = () => {\r\n\r\n  const loadingAnimeRef = useRef({\r\n    getLoading: null,\r\n    setLoading: null\r\n  })\r\n\r\n  return (\r\n    <StylesProvider injectFirst>\r\n      <SEO />\r\n      <Layout >\r\n        <ShortStocksSummary loadingAnimeRef={loadingAnimeRef} />\r\n      </Layout>\r\n      <LoadingAnime loadingAnimeRef={loadingAnimeRef} />\r\n    </StylesProvider>\r\n  )\r\n}\r\n\r\nexport default ShortStocksSummaryPage\r\n"],"sourceRoot":""}