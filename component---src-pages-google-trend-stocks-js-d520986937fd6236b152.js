(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"4cdY":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a("hszt"),n=a("wcMh"),o=a("J+eN"),l=a("b+jq"),i=a("Ao2N"),d=Object(r.a)({chartName:"LineChart",GraphicalChild:n.a,axisComponents:[{axisType:"xAxis",AxisComp:o.a},{axisType:"yAxis",AxisComp:l.a}],formatAxisMap:i.b})},Ntyy:function(e,t,a){e.exports={container:"googleTrendStocksTable-module--container--1dvXD",showColumn:"googleTrendStocksTable-module--showColumn--3TZgQ",table:"googleTrendStocksTable-module--table--2iVvI"}},ShRm:function(e,t,a){"use strict";a.r(t);var r=a("q1tI"),n=a.n(r),o=a("w8ma"),l=a("Bl7J"),i=a("ZuIi"),d=a("OGDC"),h=a("DbNq"),m=a.n(h),u=a("V3n9"),c=a("tFdz"),s=a("wd/R"),x=a.n(s),y=a("jJ2d"),f=a("qnxO"),p=a("ps87"),b=a("0d+u"),R=a("y9N3"),w=a("J+eN"),g=a("b+jq"),E=a("nJDY"),k=a("Yjvw"),q=a("wcMh"),A=a("2Ovm"),M=a("4cdY");var v=e=>{let{title:t,data:a}=e;return n.a.createElement("div",{style:{width:window.innerWidth-80+"px",height:window.innerHeight-80+"px",maxWidth:"1200px",maxHeight:"800px"}},n.a.createElement("h3",null,t),n.a.createElement(p.a,{width:"100%",height:"47%"},n.a.createElement(b.a,{data:a,syncId:"StockAndTrendDataChart",margin:{top:5,right:30,left:20,bottom:5}},n.a.createElement(R.a,{strokeDasharray:"3 3"}),n.a.createElement(w.a,{dataKey:"Date",tickFormatter:e=>x()(e).format("MM/DD/YYYY HH:mm:ss")}),n.a.createElement(g.a,{yAxisId:"left",domain:["auto","auto"]}),n.a.createElement(g.a,{yAxisId:"right",orientation:"right",domain:["auto","auto"]}),n.a.createElement(E.a,null),n.a.createElement(k.a,{wrapperStyle:{bottom:-5}}),n.a.createElement(q.a,{connectNulls:!0,yAxisId:"left",type:"monotone",name:"Close Price",dataKey:"close",stroke:"#8884d8",dot:!1}),n.a.createElement(A.a,{yAxisId:"right",name:"Volume",dataKey:"volume",fill:"#82ca9d"}))),n.a.createElement(p.a,{width:"100%",height:"47%"},n.a.createElement(M.a,{data:a,syncId:"StockAndTrendDataChart",margin:{top:5,right:30,left:20,bottom:5}},n.a.createElement(R.a,{strokeDasharray:"3 3"}),n.a.createElement(w.a,{dataKey:"Date",tickFormatter:e=>x()(e).format("MM/DD/YYYY HH:mm:ss")}),n.a.createElement(g.a,{yAxisId:"left",domain:["auto","auto"]}),n.a.createElement(g.a,{yAxisId:"right",orientation:"right",domain:["auto","auto"]}),n.a.createElement(E.a,null),n.a.createElement(k.a,null),n.a.createElement(q.a,{yAxisId:"right",connectNulls:!0,type:"monotone",name:"Week",dataKey:"week",stroke:"#0088FE",dot:!1}),n.a.createElement(q.a,{yAxisId:"right",connectNulls:!0,type:"monotone",name:"Month",dataKey:"month",stroke:"#00C49F",dot:!1}),n.a.createElement(q.a,{yAxisId:"left",connectNulls:!0,type:"monotone",name:"Quarter",dataKey:"quarter",stroke:"#AA336A",dot:!1}),n.a.createElement(q.a,{yAxisId:"left",connectNulls:!0,type:"monotone",name:"Year",dataKey:"year",stroke:"#FF8042",dot:!1}))))},Y=a("WSAr"),P=a("+x9f"),j=a("/1FI"),N=a("Ntyy"),O=a.n(N);a("jAbX");var C=e=>{let{loadingAnimeRef:t}=e;const{0:a,1:o}=Object(r.useState)({}),l=Object(r.useRef)({popModalWindow:null,popPureModal:null}),h={hide:!0,text:"W3-Max"},s={hide:!1,text:"W3-Ratio"},p={hide:!0,text:"M3-Max"},b={hide:!1,text:"M3-Ratio"},R={hide:!0,text:"M7-Max"},w={hide:!1,text:"M7-Ratio"},g={hide:!0,text:"M14-Max"},E={hide:!1,text:"M14-Ratio"},k={hide:!0,text:"Q7-Max"},q={hide:!1,text:"Q7-Ratio"},A={hide:!0,text:"Q14-Max"},M={hide:!1,text:"Q14-Ratio"},N={hide:!0,text:"Q21-Max"},C={hide:!1,text:"Q21-Ratio"},D={hide:!0,text:"Y14-Max"},W={hide:!1,text:"Y14-Ratio"},V={hide:!0,text:"Y21-Max"},L={hide:!1,text:"Y21-Ratio"},F={hide:!1,text:"Avg-Max"},S={hide:!1,text:"Avg-Ratio"},T={hide:!1,text:"Price"},H={hide:!1,text:"Short Float"},I={hide:!1,text:"P/E"},_={hide:!1,text:"P/B"},Q={hide:!1,text:"Dividend %"},X={hide:!0,text:"52W High"},U={hide:!0,text:"52W Low"},B={hide:!0,text:"Perf Week"},K={hide:!0,text:"Perf Month"},J={hide:!0,text:"Perf Quarter"},z={hide:!0,text:"Perf Half Y"},G={hide:!0,text:"Perf Year"},Z={hide:!0,text:"Perf YTD"},$={hide:!1,text:"Chart"},ee=(e,t,a,r,o)=>{let l="";return-1!==r.indexOf("week")?l="now 7-d":-1!==r.indexOf("month")?l="today 1-m":-1!==r.indexOf("quarter")?l="today 3-m":-1!==r.indexOf("year")&&(l="today 12-m"),{field:e,headerName:t,width:a,type:"number",renderCell:e=>n.a.createElement(u.a,{href:encodeURI("https://trends.google.com.tw/trends/explore?date="+l+"&q="+e.row.keyword),target:"_blank",rel:"noreferrer noopener"},n.a.createElement("span",null,e.row[r].toFixed(2))),hide:o}},te=async(e,t)=>{const a=await t.get(e);return t.response.ok&&a?a:null},ae=Object(c.a)({cachePolicy:"no-cache"}),re=Object(c.a)({cachePolicy:"no-cache"}),ne=e=>{Promise.all([te("/norn-data/stock/stat.json",ae),te("/norn-data/google-trend/stat.json",re)]).then(a=>{if(2===a.length&&null!==a[0]&&null!==a[1]){let t=a[1].reduce((t,r,n)=>{let o=r.symbol,l=a[0][o];const i=(e,t)=>0===t?0:e/t;let d={id:n,symbol:o,keyword:r.keyword,week3:r["week-3"],week3R:i(r["week-3"],r["week-avg"]),month3:r["month-3"],month3R:i(r["month-3"],r["month-avg"]),month7:r["month-7"],month7R:i(r["month-7"],r["month-avg"]),month14:r["month-14"],month14R:i(r["month-14"],r["month-avg"]),quarter7:r["quarter-7"],quarter7R:i(r["quarter-7"],r["quarter-avg"]),quarter14:r["quarter-14"],quarter14R:i(r["quarter-14"],r["quarter-avg"]),quarter21:r["quarter-21"],quarter21R:i(r["quarter-21"],r["quarter-avg"]),year14:r["year-14"],year14R:i(r["year-14"],r["year-avg"]),year21:r["year-21"],year21R:i(r["year-21"],r["year-avg"]),avg:0,avgR:0,close:null!=l&&"-"!==l.Close?l.Close:-Number.MAX_VALUE,shortFloat:null!=l&&"-"!==l["Short Float"]?l["Short Float"]:-Number.MAX_VALUE,PE:null!=l&&"-"!==l["P/E"]?l["P/E"]:Number.MAX_VALUE,PB:null!=l&&"-"!==l["P/B"]?l["P/B"]:Number.MAX_VALUE,dividend:null!=l&&"-"!==l["Dividend %"]?l["Dividend %"]:-Number.MAX_VALUE,high52:null!=l&&"-"!==l["52W High"]?l["52W High"]:-Number.MAX_VALUE,low52:null!=l&&"-"!==l["52W Low"]?l["52W Low"]:-Number.MAX_VALUE,perfWeek:null!=l&&"-"!==l["Perf Week"]?l["Perf Week"]:-Number.MAX_VALUE,perfMonth:null!=l&&"-"!==l["Perf Month"]?l["Perf Month"]:-Number.MAX_VALUE,perfQuarter:null!=l&&"-"!==l["Perf Quarter"]?l["Perf Quarter"]:-Number.MAX_VALUE,perfHalfY:null!=l&&"-"!==l["Perf Half Y"]?l["Perf Half Y"]:-Number.MAX_VALUE,perfYear:null!=l&&"-"!==l["Perf Year"]?l["Perf Year"]:-Number.MAX_VALUE,perfYTD:null!=l&&"-"!==l["Perf YTD"]?l["Perf YTD"]:-Number.MAX_VALUE};return d.avg=[d.week3,d.month3,d.month7,d.month14,d.quarter7,d.quarter14,d.quarter21,d.year14,d.year21].reduce((e,t)=>e+t,0)/9,d.avgR=[d.week3R,d.month3R,d.month7R,d.month14R,d.quarter7R,d.quarter14R,d.quarter21R,d.year14R,d.year21R].reduce((e,t)=>e+t,0)/9,(0===e.filter_symbols.length||e.filter_symbols.includes(o))&&t.push(d),t},[]);le(t)}else l.current.popModalWindow(n.a.createElement("div",null,"Load some data failed"));t.current.setLoading(!1)}).catch(()=>{l.current.popModalWindow(n.a.createElement("div",null,"Can't get data")),t.current.setLoading(!1)})},{0:oe,1:le}=Object(r.useState)([]),{0:ie,1:de}=Object(r.useState)("");return Object(r.useEffect)(()=>(ne({filter_symbols:[]}),()=>{}),[]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:O.a.container},n.a.createElement("div",{className:O.a.table},n.a.createElement(i.a,{rows:oe,columns:[Object(Y.j)("Symbol",130,"symbol"in a&&a.symbol),ee("week3",h.text,140,"week3","week3"in a?a.week3:h.hide),ee("week3R",s.text,140,"week3R","week3R"in a?a.week3R:s.hide),ee("month3",p.text,140,"month3","month3"in a?a.month3:p.hide),ee("month3R",b.text,140,"month3R","month3R"in a?a.month3R:b.hide),ee("month7",R.text,140,"month7","month7"in a?a.month7:R.hide),ee("month7R",w.text,140,"month7R","month7R"in a?a.month7R:w.hide),ee("month14",g.text,140,"month14","month14"in a?a.month14:g.hide),ee("month14R",E.text,150,"month14R","month14R"in a?a.month14R:E.hide),ee("quarter7",k.text,140,"quarter7","quarter7"in a?a.quarter7:k.hide),ee("quarter7R",q.text,140,"quarter7R","quarter7R"in a?a.quarter7R:q.hide),ee("quarter14",A.text,140,"quarter14","quarter14"in a?a.quarter14:A.hide),ee("quarter14R",M.text,150,"quarter14R","quarter14R"in a?a.quarter14R:M.hide),ee("quarter21",N.text,140,"quarter21","quarter21"in a?a.quarter21:N.hide),ee("quarter21R",C.text,150,"quarter21R","quarter21R"in a?a.quarter21R:C.hide),ee("year14",D.text,140,"year14","year14"in a?a.year14:D.hide),ee("year14R",W.text,140,"year14R","year14R"in a?a.year14R:W.hide),ee("year21",V.text,140,"year21","year21"in a?a.year21:V.hide),ee("year21R",L.text,140,"year21R","year21R"in a?a.year21R:L.hide),{field:"avg",headerName:F.text,width:140,type:"number",renderCell:e=>n.a.createElement("span",null,e.row.avg.toFixed(2)),hide:"avg"in a?a.avg:F.hide},{field:"avgR",headerName:S.text,width:140,type:"number",renderCell:e=>n.a.createElement("span",null,e.row.avgR.toFixed(2)),hide:"avgR"in a?a.avgR:S.hide},Object(Y.h)("close",T.text,110,2,"close"in a?a.close:T.hide),Object(Y.i)("shortFloat",H.text,150,"shortFloat"in a?a.shortFloat:H.hide),Object(Y.h)("PE",I.text,110,2,"PE"in a?a.PE:I.hide),Object(Y.h)("PB",_.text,110,2,"PB"in a?a.PB:_.hide),Object(Y.f)("dividend",Q.text,150,"dividend"in a?a.dividend:Q.hide),Object(Y.f)("high52",X.text,150,"high52"in a?a.high52:X.hide),Object(Y.f)("low52",U.text,150,"low52"in a?a.low52:U.hide),Object(Y.b)("perfWeek",B.text,150,2,"perfWeek"in a?a.perfWeek:B.hide,500),Object(Y.b)("perfMonth",K.text,150,2,"perfMonth"in a?a.perfMonth:K.hide,500),Object(Y.b)("perfQuarter",J.text,150,2,"perfQuarter"in a?a.perfQuarter:J.hide,500),Object(Y.b)("perfHalfY",z.text,150,2,"perfHalfY"in a?a.perfHalfY:z.hide,500),Object(Y.b)("perfYear",G.text,150,2,"perfYear"in a?a.perfYear:G.hide,500),Object(Y.b)("perfYTD",Z.text,150,2,"perfYTD"in a?a.perfYTD:Z.hide,500),{field:"Chart",headerName:$.text,width:130,renderCell:e=>n.a.createElement(d.a,{size:"small","aria-haspopup":"true",onClick:()=>{Promise.all([te("/norn-data/stock/historical-quotes/"+e.row.symbol+".json",ae),te("/norn-data/google-trend/data/"+e.row.symbol+".json",re)]).then(t=>{if(2===t.length&&null!==t[0]&&null!==t[1]){let a={};const r=(e,t,r)=>{e.forEach(e=>{let n=Date.parse(e.Date);n in a||(a[n]={}),a[n][t]=e[r]})};r(t[0],"close","Close"),r(t[0],"volume","Volume"),r(t[1].week,"week","Value"),r(t[1].month,"month","Value"),r(t[1].quarter,"quarter","Value"),r(t[1].year,"year","Value");let o=[],i=["close","volume","week","month","quarter","year"];Object.keys(a).sort().forEach(e=>{let t={Date:x()(parseInt(e)).format("MM/DD/YYYY HH:mm:ss")};i.forEach(r=>{r in a[e]&&(t[r]=a[e][r])}),o.push(t)});const d=`${e.row.symbol} (${e.row.keyword}) Chart`;l.current.popModalWindow(n.a.createElement(v,{title:d,data:o}))}else l.current.popModalWindow(n.a.createElement("div",null,"Load some data failed"))}).catch(()=>{l.current.popModalWindow(n.a.createElement("div",null,"Can't draw google trend with stock price chart"))})}},n.a.createElement(m.a,{color:"primary",style:{fontSize:40}})),hide:"Chart"in a?a.Chart:$.hide}],components:{NoRowsOverlay:f.a,Toolbar:()=>n.a.createElement(P.a,{searchVal:ie,setSearchVal:de,clickCallback:ne,info:{placeholder:"Filter symbols: AAPL, BAC, KSS, ...",tooltip:{text:j.l,link:j.m}}})},disableSelectionOnClick:!0,onColumnVisibilityChange:e=>{let t=a;t[e.field]=!e.isVisible,o(t)}}))),n.a.createElement(y.a,{modalWindowRef:l}))},D=a("3Y3G"),W=a("vrFN");t.default=()=>{const e=Object(r.useRef)({getLoading:null,setLoading:null});return n.a.createElement(o.a,{injectFirst:!0},n.a.createElement(W.a,null),n.a.createElement(l.a,null,n.a.createElement(C,{loadingAnimeRef:e})),n.a.createElement(D.a,{loadingAnimeRef:e}))}}}]);
//# sourceMappingURL=component---src-pages-google-trend-stocks-js-d520986937fd6236b152.js.map