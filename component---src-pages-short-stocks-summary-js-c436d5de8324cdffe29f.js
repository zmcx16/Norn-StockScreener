(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"4cdY":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a("hszt"),o=a("wcMh"),l=a("J+eN"),n=a("b+jq"),i=a("Ao2N"),s=Object(r.a)({chartName:"LineChart",GraphicalChild:o.a,axisComponents:[{axisType:"xAxis",AxisComp:l.a},{axisType:"yAxis",AxisComp:n.a}],formatAxisMap:i.b})},"Cxn+":function(e,t,a){e.exports={container:"shortStocksSummary-module--container--2vfLp",showColumn:"shortStocksSummary-module--showColumn--FOE5m",table:"shortStocksSummary-module--table--KMXXu"}},"l+UM":function(e,t,a){"use strict";a.r(t);var r=a("q1tI"),o=a.n(r),l=a("w8ma"),n=a("Bl7J"),i=a("ZuIi"),s=a("OGDC"),h=a("DbNq"),m=a.n(h),d=a("tFdz"),c=a("wd/R"),u=a.n(c),S=a("ps87"),b=a("0d+u"),y=a("y9N3"),f=a("J+eN"),E=a("b+jq"),p=a("nJDY"),A=a("Yjvw"),x=a("wcMh"),F=a("2Ovm"),g=a("4cdY");var w=e=>{let{title:t,data:a}=e;return o.a.createElement("div",{style:{width:window.innerWidth-80+"px",height:window.innerHeight-80+"px",maxWidth:"1200px",maxHeight:"800px"}},o.a.createElement("h3",null,t),o.a.createElement(S.a,{width:"100%",height:"32%"},o.a.createElement(b.a,{data:a,syncId:"StockAndShortDataChart",margin:{top:5,right:30,left:20,bottom:5}},o.a.createElement(y.a,{strokeDasharray:"3 3"}),o.a.createElement(f.a,{dataKey:"Date",tickFormatter:e=>u()(e).format("MM/DD/YYYY")}),o.a.createElement(E.a,{yAxisId:"left",domain:["auto","auto"]}),o.a.createElement(E.a,{yAxisId:"right",orientation:"right",domain:["auto","auto"]}),o.a.createElement(p.a,null),o.a.createElement(A.a,{wrapperStyle:{bottom:-5}}),o.a.createElement(x.a,{connectNulls:!0,yAxisId:"left",type:"monotone",name:"Close Price",dataKey:"close",stroke:"#8884d8",dot:!1}),o.a.createElement(F.a,{yAxisId:"right",name:"Volume",dataKey:"volume",fill:"#82ca9d"}))),o.a.createElement(S.a,{width:"100%",height:"32%"},o.a.createElement(b.a,{data:a,syncId:"StockAndShortDataChart",margin:{top:5,right:30,left:20,bottom:5}},o.a.createElement(y.a,{strokeDasharray:"3 3"}),o.a.createElement(f.a,{dataKey:"Date",tickFormatter:e=>u()(e).format("MM/DD/YYYY")}),o.a.createElement(E.a,{yAxisId:"left",domain:["auto","auto"]}),o.a.createElement(E.a,{yAxisId:"right",orientation:"right",domain:["auto","auto"]}),o.a.createElement(p.a,null),o.a.createElement(A.a,{wrapperStyle:{bottom:-5}}),o.a.createElement(x.a,{connectNulls:!0,yAxisId:"left",type:"monotone",name:"Short Interest",dataKey:"shortInterest",stroke:"#FF8042"}),o.a.createElement(F.a,{yAxisId:"right",name:"Avg Daily Volume",dataKey:"avgDailyVolume",fill:"#00C49F"}))),o.a.createElement(S.a,{width:"100%",height:"32%"},o.a.createElement(g.a,{data:a,syncId:"StockAndShortDataChart",margin:{top:5,right:30,left:20,bottom:5}},o.a.createElement(y.a,{strokeDasharray:"3 3"}),o.a.createElement(f.a,{dataKey:"Date",tickFormatter:e=>u()(e).format("MM/DD/YYYY")}),o.a.createElement(E.a,{yAxisId:"left",tickFormatter:e=>e+"%",domain:["auto","auto"]}),o.a.createElement(E.a,{yAxisId:"right",orientation:"right",domain:["auto","auto"]}),o.a.createElement(p.a,null),o.a.createElement(A.a,null),o.a.createElement(x.a,{yAxisId:"left",connectNulls:!0,type:"monotone",name:"Short Float",dataKey:"shortFloat",unit:"%",stroke:"#0088FE"}),o.a.createElement(x.a,{yAxisId:"right",connectNulls:!0,type:"monotone",name:"Short Ratio",dataKey:"shortRatio",stroke:"#AA336A"}))))},M=a("jJ2d"),R=a("qnxO"),_=a("+x9f"),D=a("/1FI"),L=a("WSAr"),N=a("Nihg"),v=a("Cxn+"),j=a.n(v);a("jAbX");var C=e=>{let{loadingAnimeRef:t}=e;const{0:a,1:l}=Object(r.useState)({}),n=Object(r.useRef)({popModalWindow:null,popPureModal:null}),h={hide:!1,text:"Price"},c={hide:!1,text:"Short Float"},S={hide:!1,text:"SF-15d"},b={hide:!1,text:"SF-30d"},y={hide:!1,text:"SF-45d"},f={hide:!0,text:"SF-6mo"},E={hide:!0,text:"SF-1yr"},p={hide:!1,text:"SR-15d"},A={hide:!1,text:"SR-30d"},x={hide:!1,text:"SR-45d"},F={hide:!0,text:"SR-6mo"},g={hide:!0,text:"SR-1yr"},v={hide:!1,text:"P/E"},C={hide:!1,text:"P/B"},P={hide:!1,text:"Dividend %"},Y={hide:!1,text:"52W High"},V={hide:!1,text:"52W Low"},O={hide:!1,text:"Perf Week"},k={hide:!1,text:"Perf Month"},X={hide:!1,text:"Perf Quarter"},U={hide:!1,text:"Perf Half Y"},I={hide:!1,text:"Perf Year"},W={hide:!1,text:"Perf YTD"},H={hide:!1,text:"Chart"},Q=async(e,t)=>{const a=await t.get(e);return t.response.ok&&a?a:null},K=(e,t)=>{console.log(e),console.log(t),Promise.all([Q("/norn-data/stock/historical-quotes/"+e+".json",T),Q("/norn-data/stock-short/historical-quotes/"+e+".json",B)]).then(a=>{if(2===a.length&&null!==a[0]&&null!==a[1]){let r=new Date(Date.now()-31536e6);a[0].length>0&&(r=new Date(a[0][a[0].length-1].Date)),a[1].forEach(e=>{t!=-Number.MAX_VALUE&&(e.shortFloat=parseInt(e.currentShortPositionQuantity/t*1e4,10)/100),e.shortRatio=parseInt(e.currentShortPositionQuantity/e.averageDailyVolumeQuantity*100,10)/100});let l={};const i=(e,t,a,o)=>{!e||Array.isArray(e)?e.forEach(e=>{let n=Date.parse(new Date(Date.parse(e[t])).toLocaleDateString());n<r||(n in l||(l[n]={}),l[n][a]=e[o])}):console.log("data is not array")};i(a[0],"Date","close","Close"),i(a[0],"Date","volume","Volume"),i(a[1],"settlementDate","shortInterest","currentShortPositionQuantity"),i(a[1],"settlementDate","avgDailyVolume","averageDailyVolumeQuantity"),i(a[1],"settlementDate","shortFloat","shortFloat"),i(a[1],"settlementDate","shortRatio","shortRatio");let s=[],h=["close","volume","shortInterest","avgDailyVolume","shortFloat","shortRatio"];Object.keys(l).sort().forEach(e=>{let t={Date:u()(parseInt(e)).format("MM/DD/YYYY")};h.forEach(a=>{a in l[e]&&(t[a]=l[e][a])}),s.push(t)}),console.log(s);const m=`${e} (${a[1][0].issueName}) Chart`;n.current.popModalWindow(o.a.createElement(w,{title:m,data:s}))}else n.current.popModalWindow(o.a.createElement("div",null,"Load some data failed"))}).catch(()=>{n.current.popModalWindow(o.a.createElement("div",null,"Can't draw stock price & short chart"))})},T=Object(d.a)({cachePolicy:"no-cache"}),B=Object(d.a)({cachePolicy:"no-cache"}),q=(e,a)=>{Promise.all([Q("/norn-data/stock/stat.json",T),Q("/norn-data/stock-short/stat.json",B)]).then(r=>{if(2===r.length&&null!==r[0]&&null!==r[1]){let t=Object.keys(r[1].data).reduce((t,a,o)=>{let l=r[0][a],n=r[1].data[a],i={id:o,symbol:a,close:null!=l&&"-"!==l.Close?l.Close:-Number.MAX_VALUE,shsFloat:"-"!==n["Shs Float"]?n["Shs Float"]:-Number.MAX_VALUE,shortInterest:"-"!==n["Short Interest"]?n["Short Interest"]:-Number.MAX_VALUE,shortFloat:"-"!==n["Short Float"]?n["Short Float"]:-Number.MAX_VALUE,shortRatio:"-"!==n["Short Ratio"]?n["Short Ratio"]:-Number.MAX_VALUE,SF0_5m:"-"!==n["SF-0.5m"]?n["SF-0.5m"]:-Number.MAX_VALUE,SF1m:"-"!==n["SF-1m"]?n["SF-1m"]:-Number.MAX_VALUE,SF1_5m:"-"!==n["SF-1.5m"]?n["SF-1.5m"]:-Number.MAX_VALUE,SF0_5y:"-"!==n["SF-0.5y"]?n["SF-0.5y"]:-Number.MAX_VALUE,SF1y:"-"!==n["SF-1y"]?n["SF-1y"]:-Number.MAX_VALUE,SR0_5m:"-"!==n["SR-0.5m"]?n["SR-0.5m"]:-Number.MAX_VALUE,SR1m:"-"!==n["SR-1m"]?n["SR-1m"]:-Number.MAX_VALUE,SR1_5m:"-"!==n["SR-1.5m"]?n["SR-1.5m"]:-Number.MAX_VALUE,SR0_5y:"-"!==n["SR-0.5y"]?n["SR-0.5y"]:-Number.MAX_VALUE,SR1y:"-"!==n["SR-1y"]?n["SR-1y"]:-Number.MAX_VALUE,PE:null!=l&&"-"!==l["P/E"]?l["P/E"]:Number.MAX_VALUE,PB:null!=l&&"-"!==l["P/B"]?l["P/B"]:Number.MAX_VALUE,dividend:null!=l&&"-"!==l["Dividend %"]?l["Dividend %"]:-Number.MAX_VALUE,high52:null!=l&&"-"!==l["52W High"]?l["52W High"]:-Number.MAX_VALUE,low52:null!=l&&"-"!==l["52W Low"]?l["52W Low"]:-Number.MAX_VALUE,perfWeek:null!=l&&"-"!==l["Perf Week"]?l["Perf Week"]:-Number.MAX_VALUE,perfMonth:null!=l&&"-"!==l["Perf Month"]?l["Perf Month"]:-Number.MAX_VALUE,perfQuarter:null!=l&&"-"!==l["Perf Quarter"]?l["Perf Quarter"]:-Number.MAX_VALUE,perfHalfY:null!=l&&"-"!==l["Perf Half Y"]?l["Perf Half Y"]:-Number.MAX_VALUE,perfYear:null!=l&&"-"!==l["Perf Year"]?l["Perf Year"]:-Number.MAX_VALUE,perfYTD:null!=l&&"-"!==l["Perf YTD"]?l["Perf YTD"]:-Number.MAX_VALUE};return(0===e.filter_symbols.length||e.filter_symbols.includes(a))&&t.push(i),t},[]);console.log(t),z(t),a&&K(t[0].symbol,t[0].shsFloat)}else n.current.popModalWindow(o.a.createElement("div",null,"Load some data failed"));t.current.setLoading(!1)}).catch(()=>{n.current.popModalWindow(o.a.createElement("div",null,"Can't get data")),t.current.setLoading(!1)})},{0:J,1:z}=Object(r.useState)([]),{0:G,1:$}=Object(r.useState)("");return Object(r.useEffect)(()=>{let e={filter_symbols:[]},t=!1;if("undefined"!=typeof window){const a=new URLSearchParams(window.location.search);let r=a.get("symbol");r&&(e={filter_symbols:[r]}),t="true"===a.get("showChart")}return q(e,t),()=>{}},[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:j.a.container},o.a.createElement("div",{className:j.a.table},o.a.createElement(i.a,{rows:J,columns:[Object(L.j)("Symbol",130,"symbol"in a&&a.symbol),Object(L.g)("close",h.text,110,"close"in a?a.close:h.hide,null,"yahoo"),{field:"shortFloat",headerName:"Short Float",width:110,type:"number",renderCell:e=>"-"===e.value||e.value===-Number.MAX_VALUE||e.value===Number.MAX_VALUE||null===e.value||void 0===e.value||"Infinity"===e.value||"NaN"===e.value?o.a.createElement("span",null,"-"):o.a.createElement(N.b,{arrow:!0,title:o.a.createElement("span",{style:{fontSize:"14px",whiteSpace:"pre-line",lineHeight:"20px",textAlign:"center"}},e.row.shortInterest+" / "+e.row.shsFloat)},o.a.createElement("span",null,(100*e.value).toFixed(2)+"%")),hide:"shortFloat"in a?a.shortFloat:c.hide},{field:"shortRatio",headerName:"Short Ratio",width:110,type:"number",renderCell:e=>"-"===e.value||e.value===-Number.MAX_VALUE||e.value===Number.MAX_VALUE||null===e.value||void 0===e.value||"Infinity"===e.value||"NaN"===e.value?o.a.createElement("span",null,"-"):o.a.createElement(N.b,{arrow:!0,title:o.a.createElement("span",{style:{fontSize:"14px",whiteSpace:"pre-line",lineHeight:"20px",textAlign:"center"}},e.row.shortInterest+" / "+e.row.shsFloat)},o.a.createElement("span",null,e.value.toFixed(2))),hide:"shortFloat"in a?a.shortFloat:c.hide},Object(L.b)("SF0_5m",S.text,150,2,"SF0_5m"in a?a.SF0_5m:S.hide,500,"Short Float Latest 15 Days Changed (%)",-1),Object(L.b)("SF1m",b.text,150,2,"SF1m"in a?a.SF1m:b.hide,500,"Short Float Latest 30 Days Changed (%)",-1),Object(L.b)("SF1_5m",y.text,150,2,"SF1_5m"in a?a.SF1_5m:y.hide,500,"Short Float Latest 45 Days Changed (%)",-1),Object(L.b)("SF0_5y",f.text,150,2,"SF0_5y"in a?a.SF0_5y:f.hide,500,"Short Float Latest 6 Months Changed (%)",-1),Object(L.b)("SF1y",E.text,150,2,"SF1y"in a?a.SF1y:E.hide,500,"Short Float Latest 1 Years Changed (%)",-1),Object(L.b)("SR0_5m",p.text,150,2,"SR0_5m"in a?a.SR0_5m:p.hide,500,"Short Ratio Latest 15 Days Changed (%)",-1),Object(L.b)("SR1m",A.text,150,2,"SR1m"in a?a.SR1m:A.hide,500,"Short Ratio Latest 30 Days Changed (%)",-1),Object(L.b)("SR1_5m",x.text,150,2,"SR1_5m"in a?a.SR1_5m:x.hide,500,"Short Ratio Latest 45 Days Changed (%)",-1),Object(L.b)("SR0_5y",F.text,150,2,"SR0_5y"in a?a.SR0_5y:F.hide,500,"Short Ratio Latest 6 Months Changed (%)",-1),Object(L.b)("SR1y",g.text,150,2,"SR1y"in a?a.SR1y:g.hide,500,"Short Ratio Latest 1 Years Changed (%)",-1),Object(L.h)("PE",v.text,110,2,"PE"in a?a.PE:v.hide),Object(L.h)("PB",C.text,110,2,"PB"in a?a.PB:C.hide),Object(L.f)("dividend",P.text,150,"dividend"in a?a.dividend:P.hide),Object(L.f)("high52",Y.text,150,"high52"in a?a.high52:Y.hide),Object(L.f)("low52",V.text,150,"low52"in a?a.low52:V.hide),Object(L.b)("perfWeek",O.text,150,2,"perfWeek"in a?a.perfWeek:O.hide,500),Object(L.b)("perfMonth",k.text,150,2,"perfMonth"in a?a.perfMonth:k.hide,500),Object(L.b)("perfQuarter",X.text,150,2,"perfQuarter"in a?a.perfQuarter:X.hide,500),Object(L.b)("perfHalfY",U.text,150,2,"perfHalfY"in a?a.perfHalfY:U.hide,500),Object(L.b)("perfYear",I.text,150,2,"perfYear"in a?a.perfYear:I.hide,500),Object(L.b)("perfYTD",W.text,150,2,"perfYTD"in a?a.perfYTD:W.hide,500),{field:"Chart",headerName:H.text,width:130,renderCell:e=>o.a.createElement(s.a,{size:"small","aria-haspopup":"true",onClick:()=>{K(e.row.symbol,e.row.shsFloat)}},o.a.createElement(m.a,{color:"primary",style:{fontSize:40}})),hide:"Chart"in a?a.Chart:H.hide}],components:{NoRowsOverlay:R.a,Toolbar:()=>o.a.createElement(_.a,{searchVal:G,setSearchVal:$,clickCallback:e=>{q(e,!1)},info:{placeholder:"Filter symbols: AAPL, BAC, KSS, ...",tooltip:{text:D.w,link:D.j}}})},disableSelectionOnClick:!0,onColumnVisibilityChange:e=>{let t=a;t[e.field]=!e.isVisible,l(t)}}))),o.a.createElement(M.a,{modalWindowRef:n}))},P=a("3Y3G"),Y=a("vrFN");t.default=()=>{const e=Object(r.useRef)({getLoading:null,setLoading:null});return o.a.createElement(l.a,{injectFirst:!0},o.a.createElement(Y.a,null),o.a.createElement(n.a,null,o.a.createElement(C,{loadingAnimeRef:e})),o.a.createElement(P.a,{loadingAnimeRef:e}))}}}]);
//# sourceMappingURL=component---src-pages-short-stocks-summary-js-c436d5de8324cdffe29f.js.map