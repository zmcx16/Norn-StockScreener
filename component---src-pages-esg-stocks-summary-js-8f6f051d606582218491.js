(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{AdZb:function(e,t,r){"use strict";r.r(t);var a=r("q1tI"),n=r.n(a),o=r("w8ma"),l=r("Bl7J"),i=r("ZuIi"),s=r("OGDC"),c=r("V3n9"),m=r("DbNq"),d=r.n(m),u=r("tFdz"),g=r("wd/R"),h=r.n(g),p=r("/1FI"),E=r("ps87"),A=r("0d+u"),v=r("y9N3"),S=r("J+eN"),y=r("b+jq"),b=r("nJDY"),f=r("Yjvw"),Y=r("wcMh");var x=e=>{let{symbol:t,peerGroup:r,data:a}=e;return n.a.createElement("div",{style:{width:window.innerWidth-80+"px",height:window.innerHeight-80+"px",maxWidth:"1200px",maxHeight:"800px"}},n.a.createElement("h3",null,t+" ESG Chart"),n.a.createElement(E.a,{width:"100%",height:"47%"},n.a.createElement(A.a,{data:a,syncId:"StockAndESGDataChart",margin:{top:5,right:30,left:20,bottom:5}},n.a.createElement(v.a,{strokeDasharray:"3 3"}),n.a.createElement(S.a,{dataKey:"Date",tickFormatter:e=>h()(e).format("MM/DD/YYYY")}),n.a.createElement(y.a,{yAxisId:"left",domain:["auto","auto"]}),n.a.createElement(b.a,null),n.a.createElement(f.a,{wrapperStyle:{bottom:-5}}),n.a.createElement(Y.a,{connectNulls:!0,yAxisId:"left",type:"monotone",name:t+" Score",dataKey:t+"_esgScore",stroke:"#0088FE"}),n.a.createElement(Y.a,{connectNulls:!0,yAxisId:"left",type:"monotone",name:r+" Score",dataKey:r+"_esgScore",stroke:"#AA336A"}))),n.a.createElement(E.a,{width:"100%",height:"47%"},n.a.createElement(A.a,{data:a,syncId:"StockAndESGDataChart",margin:{top:5,right:30,left:20,bottom:5}},n.a.createElement(v.a,{strokeDasharray:"3 3"}),n.a.createElement(S.a,{dataKey:"Date",tickFormatter:e=>h()(e).format("MM/DD/YYYY")}),n.a.createElement(y.a,{yAxisId:"left",domain:["auto","auto"]}),n.a.createElement(b.a,null),n.a.createElement(f.a,{wrapperStyle:{bottom:-5}}),n.a.createElement(Y.a,{connectNulls:!0,yAxisId:"left",type:"monotone",name:t+" Governance",dataKey:t+"_governanceScore",stroke:"#FF0000"}),n.a.createElement(Y.a,{connectNulls:!0,yAxisId:"left",type:"monotone",name:t+" Environment",dataKey:t+"_environmentScore",stroke:"#FF00FF"}),n.a.createElement(Y.a,{connectNulls:!0,yAxisId:"left",type:"monotone",name:t+" Social",dataKey:t+"_socialScore",stroke:"#2828FF"}),n.a.createElement(Y.a,{connectNulls:!0,yAxisId:"left",type:"monotone",name:r+" Governance",dataKey:r+"_governanceScore",stroke:"#00AEAE"}),n.a.createElement(Y.a,{connectNulls:!0,yAxisId:"left",type:"monotone",name:r+" Environment",dataKey:r+"_environmentScore",stroke:"#00A600"}),n.a.createElement(Y.a,{connectNulls:!0,yAxisId:"left",type:"monotone",name:r+" Social",dataKey:r+"_socialScore",stroke:"#8C8C00"}))))},G=r("jJ2d"),P=r("qnxO"),L=r("+x9f"),w=r("WSAr"),N=r("a+H2"),M=r.n(N);r("jAbX");var _=e=>{let{loadingAnimeRef:t}=e;const{0:r,1:o}=Object(a.useState)({}),l=Object(a.useRef)({popModalWindow:null,popPureModal:null}),m={hide:!1,text:"Price"},g={hide:!0,text:"Type"},E={hide:!1,text:"ESG Latest"},A={hide:!1,text:"ESG Avg 1Yr"},v={hide:!1,text:"ESG Avg 3Yr"},S={hide:!1,text:"ESG Avg 5Yr"},y={hide:!1,text:"Peer Latest"},b={hide:!1,text:"Peer Avg 1Yr"},f={hide:!1,text:"Peer Avg 3Yr"},Y={hide:!1,text:"Peer Avg 5Yr"},N={hide:!1,text:"Ratio Latest"},_={hide:!1,text:"Ratio Avg 1Yr"},j={hide:!1,text:"Ratio Avg 3Yr"},k={hide:!1,text:"Ratio Avg 5Yr"},O={hide:!1,text:"P/E"},D={hide:!1,text:"P/B"},V={hide:!1,text:"Short Float"},F={hide:!1,text:"Dividend %"},U={hide:!1,text:"52W High"},X={hide:!1,text:"52W Low"},C={hide:!1,text:"Perf Week"},W={hide:!1,text:"Perf Month"},I={hide:!1,text:"Perf Quarter"},R={hide:!1,text:"Perf Half Y"},H={hide:!1,text:"Perf Year"},K={hide:!1,text:"Perf YTD"},B={hide:!1,text:"Chart"},T=async(e,t)=>{const r=await t.get(e);return t.response.ok&&r?r:null},Q=e=>{Promise.all([T("/norn-data/esg/data/esgChart/"+e+".json",z)]).then(t=>{if(1===t.length&&null!==t[0]){let r=new Date(Date.now()-15768e7);r<new Date(2020,1,1)&&(r=new Date(2020,1,1));let a={};const o=(e,t,n)=>{e&&!Array.isArray(e)||t&&!Array.isArray(t)?console.log("timestamp or data is not array"):e.forEach((e,o)=>{let l=Date.parse(new Date(1e3*e).toLocaleDateString());if(l<r)return;l in a||(a[l]={});let i=t[o];"number"==typeof i&&(i=parseFloat(i.toFixed(2))),a[l][n]=i})};let i=t[0].data.esgChart.result[0],s=i.peerGroup,c={};c[e+"_esgScore"]={timestamps:i.symbolSeries.timestamp,datas:i.symbolSeries.esgScore},c[e+"_governanceScore"]={timestamps:i.symbolSeries.timestamp,datas:i.symbolSeries.governanceScore},c[e+"_environmentScore"]={timestamps:i.symbolSeries.timestamp,datas:i.symbolSeries.environmentScore},c[e+"_socialScore"]={timestamps:i.symbolSeries.timestamp,datas:i.symbolSeries.socialScore},c[s+"_esgScore"]={timestamps:i.peerSeries.timestamp,datas:i.peerSeries.esgScore},c[s+"_governanceScore"]={timestamps:i.peerSeries.timestamp,datas:i.peerSeries.governanceScore},c[s+"_environmentScore"]={timestamps:i.peerSeries.timestamp,datas:i.peerSeries.environmentScore},c[s+"_socialScore"]={timestamps:i.peerSeries.timestamp,datas:i.peerSeries.socialScore},Object.keys(c).forEach(e=>{o(c[e].timestamps,c[e].datas,e)}),console.log(a);let m=[],d=Object.keys(c);console.log(d),Object.keys(a).sort().forEach(e=>{let t={Date:h()(parseInt(e)).format("MM/DD/YYYY")};d.forEach(r=>{r in a[e]&&(t[r]=a[e][r])}),m.push(t)}),console.log(m),l.current.popModalWindow(n.a.createElement(x,{symbol:e,peerGroup:s,data:m}))}else l.current.popModalWindow(n.a.createElement("div",null,"Load some data failed"))}).catch(()=>{l.current.popModalWindow(n.a.createElement("div",null,"Can't draw stock price & esg chart"))})},J=function(e,t,r,a,o){void 0===o&&(o=null);let l={field:e,headerName:t,width:r,type:"number",renderCell:e=>"-"===e.value||e.value===-Number.MAX_VALUE||e.value===Number.MAX_VALUE||null===e.value||void 0===e.value||"Infinity"===e.value||"NaN"===e.value?n.a.createElement("span",null,"-"):n.a.createElement("span",{style:{fontWeight:500,color:parseFloat(e.value)<1?"green":parseFloat(e.value)>=-1?"red":""}},e.value),hide:a};return null!=o&&(l.description=o),l},q=Object(u.a)({cachePolicy:"no-cache"}),z=Object(u.a)({cachePolicy:"no-cache"}),Z=(e,r)=>{Promise.all([T("/norn-data/stock/stat.json",q),T("/norn-data/esg/stat.json",z)]).then(a=>{if(2===a.length&&null!==a[0]&&null!==a[1]){let t=a[1].data.reduce((t,r,n)=>{let o=r.symbol,l=a[0][o],i={id:n,symbol:o,close:null!=l&&"-"!==l.Close?l.Close:-Number.MAX_VALUE,peerGroup:"peerGroup"in r&&"-"!==r.peerGroup?r.peerGroup:"-",ESGLatest:"esg-latest"in r&&"-"!==r["esg-latest"]?r["esg-latest"]:-Number.MAX_VALUE,ESGAvg1Yr:"esg-avg-1yr"in r&&"-"!==r["esg-avg-1yr"]?r["esg-avg-1yr"]:-Number.MAX_VALUE,ESGAvg3Yr:"esg-avg-3yr"in r&&"-"!==r["esg-avg-3yr"]?r["esg-avg-3yr"]:-Number.MAX_VALUE,ESGAvg5Yr:"esg-avg-5yr"in r&&"-"!==r["esg-avg-5yr"]?r["esg-avg-5yr"]:-Number.MAX_VALUE,ESGPeerLatest:"esg-peer-latest"in r&&"-"!==r["esg-peer-latest"]?r["esg-peer-latest"]:-Number.MAX_VALUE,ESGPeerAvg1Yr:"esg-peer-avg-1yr"in r&&"-"!==r["esg-peer-avg-1yr"]?r["esg-peer-avg-1yr"]:-Number.MAX_VALUE,ESGPeerAvg3Yr:"esg-peer-avg-3yr"in r&&"-"!==r["esg-peer-avg-3yr"]?r["esg-peer-avg-3yr"]:-Number.MAX_VALUE,ESGPeerAvg5Yr:"esg-peer-avg-5yr"in r&&"-"!==r["esg-peer-avg-5yr"]?r["esg-peer-avg-5yr"]:-Number.MAX_VALUE,ratioLatest:"ratio-latest"in r&&"-"!==r["ratio-latest"]?r["ratio-latest"]:-Number.MAX_VALUE,ratioAvg1Yr:"ratio-avg-1yr"in r&&"-"!==r["ratio-avg-1yr"]?r["ratio-avg-1yr"]:-Number.MAX_VALUE,ratioAvg3Yr:"ratio-avg-3yr"in r&&"-"!==r["ratio-avg-3yr"]?r["ratio-avg-3yr"]:-Number.MAX_VALUE,ratioAvg5Yr:"ratio-avg-5yr"in r&&"-"!==r["ratio-avg-5yr"]?r["ratio-avg-5yr"]:-Number.MAX_VALUE,PE:null!=l&&"-"!==l["P/E"]?l["P/E"]:Number.MAX_VALUE,PB:null!=l&&"-"!==l["P/B"]?l["P/B"]:Number.MAX_VALUE,shortFloat:null!=l&&"-"!==l["Short Float"]?l["Short Float"]:-Number.MAX_VALUE,dividend:null!=l&&"-"!==l["Dividend %"]?l["Dividend %"]:-Number.MAX_VALUE,high52:null!=l&&"-"!==l["52W High"]?l["52W High"]:-Number.MAX_VALUE,low52:null!=l&&"-"!==l["52W Low"]?l["52W Low"]:-Number.MAX_VALUE,perfWeek:null!=l&&"-"!==l["Perf Week"]?l["Perf Week"]:-Number.MAX_VALUE,perfMonth:null!=l&&"-"!==l["Perf Month"]?l["Perf Month"]:-Number.MAX_VALUE,perfQuarter:null!=l&&"-"!==l["Perf Quarter"]?l["Perf Quarter"]:-Number.MAX_VALUE,perfHalfY:null!=l&&"-"!==l["Perf Half Y"]?l["Perf Half Y"]:-Number.MAX_VALUE,perfYear:null!=l&&"-"!==l["Perf Year"]?l["Perf Year"]:-Number.MAX_VALUE,perfYTD:null!=l&&"-"!==l["Perf YTD"]?l["Perf YTD"]:-Number.MAX_VALUE};return(0===e.filter_symbols.length||e.filter_symbols.includes(o))&&t.push(i),t},[]);console.log(t),ee(t),r&&Q(t[0].symbol)}else l.current.popModalWindow(n.a.createElement("div",null,"Load some data failed"));t.current.setLoading(!1)}).catch(()=>{l.current.popModalWindow(n.a.createElement("div",null,"Can't get data")),t.current.setLoading(!1)})},{0:$,1:ee}=Object(a.useState)([]),{0:te,1:re}=Object(a.useState)("");return Object(a.useEffect)(()=>{let e={filter_symbols:[]},t=!1;if("undefined"!=typeof window){const r=new URLSearchParams(window.location.search);let a=r.get("symbol");a&&(e={filter_symbols:[a]}),t="true"===r.get("showChart")}return Z(e,t),()=>{}},[]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:M.a.container},n.a.createElement("div",{className:M.a.table},n.a.createElement(i.a,{rows:$,columns:[Object(w.j)("Symbol",130,"symbol"in r&&r.symbol),Object(w.g)("close",m.text,110,"close"in r?r.close:m.hide,null,"yahoo"),{field:"peerGroup",headerName:"PeerGroup",width:155,hide:"peerGroup"in r?r.peerGroup:g.hide},{field:"ESGLatest",headerName:E.text,width:110,type:"number",renderCell:e=>"-"===e.value||e.value===-Number.MAX_VALUE||e.value===Number.MAX_VALUE||null===e.value||void 0===e.value||"Infinity"===e.value||"NaN"===e.value?n.a.createElement("span",null,"-"):n.a.createElement(c.a,{href:w.l+"quote/"+e.row.symbol+"/sustainability",target:"_blank",rel:"noreferrer noopener"},n.a.createElement("span",null,e.value.toFixed(2))),hide:"ESGLatest"in r?r.ESGLatest:E.hide},Object(w.h)("ESGAvg1Yr",A.text,110,2,"ESGAvg1Yr"in r?r.ESGAvg1Yr:A.hide),Object(w.h)("ESGAvg3Yr",v.text,110,2,"ESGAvg3Yr"in r?r.ESGAvg3Yr:v.hide),Object(w.h)("ESGAvg5Yr",S.text,110,2,"ESGAvg5Yr"in r?r.ESGLatest:S.hide),Object(w.h)("ESGPeerLatest",y.text,110,2,"ESGPeerLatest"in r?r.ESGPeerLatest:y.hide),Object(w.h)("ESGPeerAvg1Yr",b.text,110,2,"ESGPeerAvg1Yr"in r?r.ESGPeerAvg1Yr:b.hide),Object(w.h)("ESGPeerAvg3Yr",f.text,110,2,"ESGPeerAvg3Yr"in r?r.ESGPeerAvg3Yr:f.hide),Object(w.h)("ESGPeerAvg5Yr",Y.text,110,2,"ESGPeerAvg5Yr"in r?r.ESGPeerAvg5Yr:Y.hide),J("ratioLatest",N.text,110,"ratioLatest"in r?r.ratioLatest:N.hide,"ESG Ratio Latest (ESG Latest / ESG Peer Latest)"),J("ratioAvg1Yr",_.text,110,"ratioAvg1Yr"in r?r.ratioAvg1Yr:_.hide,"ESG Ratio Avg 1Yr (ESG Avg 1Yr / ESG Peer Avg 1Yr)"),J("ratioAvg3Yr",j.text,110,"ratioAvg3Yr"in r?r.ratioAvg3Yr:j.hide,"ESG Ratio Avg 3Yr (ESG Avg 3Yr / ESG Peer Avg 3Yr)"),J("ratioAvg5Yr",k.text,110,"ratioAvg5Yr"in r?r.ratioAvg5Yr:k.hide,"ESG Ratio Avg 5Yr (ESG Avg 5Yr / ESG Peer Avg 5Yr)"),Object(w.h)("PE",O.text,110,2,"PE"in r?r.PE:O.hide),Object(w.h)("PB",D.text,110,2,"PB"in r?r.PB:D.hide),Object(w.i)("shortFloat",V.text,150,"shortFloat"in r?r.shortFloat:V.hide),Object(w.f)("dividend",F.text,150,"dividend"in r?r.dividend:F.hide),Object(w.f)("high52",U.text,150,"high52"in r?r.high52:U.hide),Object(w.f)("low52",X.text,150,"low52"in r?r.low52:X.hide),Object(w.b)("perfWeek",C.text,150,2,"perfWeek"in r?r.perfWeek:C.hide,500),Object(w.b)("perfMonth",W.text,150,2,"perfMonth"in r?r.perfMonth:W.hide,500),Object(w.b)("perfQuarter",I.text,150,2,"perfQuarter"in r?r.perfQuarter:I.hide,500),Object(w.b)("perfHalfY",R.text,150,2,"perfHalfY"in r?r.perfHalfY:R.hide,500),Object(w.b)("perfYear",H.text,150,2,"perfYear"in r?r.perfYear:H.hide,500),Object(w.b)("perfYTD",K.text,150,2,"perfYTD"in r?r.perfYTD:K.hide,500),{field:"Chart",headerName:B.text,width:130,renderCell:e=>n.a.createElement(s.a,{size:"small","aria-haspopup":"true",onClick:()=>{Q(e.row.symbol,e.row.shsFloat)}},n.a.createElement(d.a,{color:"primary",style:{fontSize:40}})),hide:"Chart"in r?r.Chart:B.hide}],components:{NoRowsOverlay:P.a,Toolbar:()=>n.a.createElement(L.a,{searchVal:te,setSearchVal:re,clickCallback:e=>{Z(e,!1)},info:{placeholder:"Filter symbols: AAPL, BAC, KSS, ...",tooltip:{text:p.i,link:p.h}}})},disableSelectionOnClick:!0,onColumnVisibilityChange:e=>{let t=r;t[e.field]=!e.isVisible,o(t)}}))),n.a.createElement(G.a,{modalWindowRef:l}))},j=r("3Y3G"),k=r("vrFN");t.default=()=>{const e=Object(a.useRef)({getLoading:null,setLoading:null});return n.a.createElement(o.a,{injectFirst:!0},n.a.createElement(k.a,null),n.a.createElement(l.a,null,n.a.createElement(_,{loadingAnimeRef:e})),n.a.createElement(j.a,{loadingAnimeRef:e}))}},"a+H2":function(e,t,r){e.exports={container:"esgStocksSummary-module--container--12PN2",showColumn:"esgStocksSummary-module--showColumn--2zCvj",table:"esgStocksSummary-module--table--1YDps"}}}]);
//# sourceMappingURL=component---src-pages-esg-stocks-summary-js-8f6f051d606582218491.js.map